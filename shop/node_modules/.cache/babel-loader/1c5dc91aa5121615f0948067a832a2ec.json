{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import setErrorNotNull from'../../../common/untils/setErrorNotNull';import InputWitchCkeckingNotNull from'../../../common/input/components/InputWitchCkeckingNotNullComponent';import formatPhoneNumber from'../../../common/untils/formatPhoneNumber';import PopUp from'../../../common/popup/components/PopUpComponent';import PopUpSomethingWentWrong from'../../../common/popup/components/PopUpSomethingWentWrongComponent';import getUsers from'../api/get/getUsers';import postChangeUserInformation from'../api/post/postChangeUserInformation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PersonaIformation=/*#__PURE__*/function(_React$Component){_inherits(PersonaIformation,_React$Component);var _super=_createSuper(PersonaIformation);function PersonaIformation(props){var _this;_classCallCheck(this,PersonaIformation);_this=_super.call(this,props);_this._isMounted=false;_this.setError=function(errorMessage){_this.setState({ErrorMessage:errorMessage});};_this.setpopupSmthWentWrongActive=function(value){_this.setState({popupSmthWentWrongActive:value});};_this.updateDataUsers=function(firstName,lastName,email,phoneNumber,address,valueIsLoading,passwordNew){if(_this._isMounted){_this.setState({firstName:firstName,lastName:lastName,email:email,phoneNumber:phoneNumber,address:address,passwordNew:passwordNew,passwordNewRepeat:passwordNew,isLoading:valueIsLoading});}};_this.updateData=function(value,name){if(name==='firstName'){_this.setState({firstName:value});}if(name==='lastName'){_this.setState({lastName:value});}if(name==='email'){_this.setState({email:value});}if(name==='passwordNew'){_this.setState({passwordNew:value});}if(name==='passwordNewRepeat'){_this.setState({passwordNewRepeat:value});}};_this.state={firstName:'',firstNameInput:'firstNameInput',firstNameSymbol:'firstNameSymbol',lastName:'',lastNameInput:'lastNameInput',lastNameSymbol:'lastNameSymbol',email:'',emailInput:'emailInput',emailSymbol:'emailSymbol',phoneNumber:'+375(__)___-__-__',address:'',passwordNew:'',passwordNewInput:'passwordNewInput',passwordNewSymbol:'errorSymbolPasswordNew',passwordNewRepeat:'',passwordRepeatInput:'passwordNewRepeatInput',passwordRepeatSymbol:'errorSymbolPasswordNewRepeat',popupSmthWentWrongActive:true,isLoading:false,ErrorMessage:''};return _this;}_createClass(PersonaIformation,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var pages;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this._isMounted=true;pages=this.props.pages;_context.next=4;return getUsers(pages.loginPersonalAccountReducer.clientEmail,this.updateDataUsers,this.setError);case 4:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,firstName=_this$state.firstName,firstNameInput=_this$state.firstNameInput,firstNameSymbol=_this$state.firstNameSymbol,lastName=_this$state.lastName,lastNameInput=_this$state.lastNameInput,lastNameSymbol=_this$state.lastNameSymbol,email=_this$state.email,emailInput=_this$state.emailInput,emailSymbol=_this$state.emailSymbol,phoneNumber=_this$state.phoneNumber,address=_this$state.address,passwordNew=_this$state.passwordNew,passwordNewInput=_this$state.passwordNewInput,passwordNewSymbol=_this$state.passwordNewSymbol,passwordNewRepeat=_this$state.passwordNewRepeat,passwordRepeatInput=_this$state.passwordRepeatInput,passwordRepeatSymbol=_this$state.passwordRepeatSymbol,popupSmthWentWrongActive=_this$state.popupSmthWentWrongActive,isLoading=_this$state.isLoading,ErrorMessage=_this$state.ErrorMessage;var setIsPersonalInformationVisible=this.props.setIsPersonalInformationVisible;function handleButtonClick(){return _handleButtonClick.apply(this,arguments);}function _handleButtonClick(){_handleButtonClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return postChangeUserInformation(firstName,lastName,email,passwordNew,phoneNumber,address);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _handleButtonClick.apply(this,arguments);}if(!isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"-isLoading\",children:\" \"});}if(ErrorMessage){return/*#__PURE__*/_jsx(PopUp,{active:popupSmthWentWrongActive,setActive:this.setpopupSmthWentWrongActive,children:/*#__PURE__*/_jsx(PopUpSomethingWentWrong,{text:\"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0435\\u0449\\u0435 \\u0440\\u0430\\u0437\",setpopupSmthWentWrongActive:this.setpopupSmthWentWrongActive})});}return/*#__PURE__*/_jsx(\"div\",{className:\"personalInformation-wrap\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"personalInformation\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"firstName\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"firstNameString -required\",children:\"\\u0418\\u043C\\u044F:\"}),/*#__PURE__*/_jsx(InputWitchCkeckingNotNull,{initialValue:firstName,type:\"text\",name:\"firstName\",classInput:firstNameInput,classSymbol:firstNameSymbol,updateData:this.updateData})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"lastName\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"lastNameString -required\",children:\"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(InputWitchCkeckingNotNull,{initialValue:lastName,type:\"text\",name:\"lastName\",classInput:lastNameInput,classSymbol:lastNameSymbol,updateData:this.updateData})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"email\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"emailString -required\",children:\"Email:\"}),/*#__PURE__*/_jsx(InputWitchCkeckingNotNull,{initialValue:email,type:\"email\",name:\"email\",classInput:emailInput,classSymbol:emailSymbol,updateData:this.updateData})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"phone\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"phoneString\",children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"phoneInput\",name:\"PHONE\",type:\"tel\",minLength:\"13\",maxLength:\"13\",placeholder:\"+375 (__) ___-__-__\",value:phoneNumber,onFocus:function onFocus(){return _this2.setState({phoneNumber:'+375'});},onChange:function onChange(event){_this2.setState({phoneNumber:formatPhoneNumber(event.target.value)});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"address\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"addressString\",children:\"\\u0410\\u0434\\u0440\\u0435\\u0441:\"}),/*#__PURE__*/_jsx(\"input\",{className:\"addressInput\",type:\"text\",name:\"address\",value:address,onChange:function onChange(e){_this2.setState({address:e.target.value});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"passwordNew\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"passwordNewString -required\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(InputWitchCkeckingNotNull,{initialValue:passwordNew,type:\"password\",name:\"passwordNew\",classInput:passwordNewInput,classSymbol:passwordNewSymbol,updateData:this.updateData})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"passwordNewRepeat\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"passwordNewRepeatString -required\",children:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(InputWitchCkeckingNotNull,{initialValue:passwordNewRepeat,type:\"password\",name:\"passwordNewRepeat\",classInput:passwordRepeatInput,classSymbol:passwordRepeatSymbol,updateData:this.updateData})]}),firstName&&lastName&&email&&passwordNew&&passwordNewRepeat&&passwordNew===passwordNewRepeat?/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"changePasswordButton\",onClick:function onClick(){handleButtonClick();setIsPersonalInformationVisible(false);},children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"changePasswordButton\",onClick:function onClick(){if(!firstName){setErrorNotNull(firstNameInput,firstNameSymbol);}if(!lastName){setErrorNotNull(lastNameInput,lastNameSymbol);}if(!email){setErrorNotNull(emailInput,emailSymbol);}if(!passwordNew){setErrorNotNull(passwordNewInput,passwordNewSymbol);}if(passwordNew!==passwordNewRepeat){setErrorNotNull(passwordRepeatInput,passwordRepeatSymbol);}},children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]})});}}]);return PersonaIformation;}(React.Component);var ConnectedPersonaIformation=connect(function(state){return{pages:state};})(PersonaIformation);export default ConnectedPersonaIformation;","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/personalAccount/components/PersonaIformationComponent.jsx"],"names":["React","connect","setErrorNotNull","InputWitchCkeckingNotNull","formatPhoneNumber","PopUp","PopUpSomethingWentWrong","getUsers","postChangeUserInformation","PersonaIformation","props","_isMounted","setError","errorMessage","setState","ErrorMessage","setpopupSmthWentWrongActive","value","popupSmthWentWrongActive","updateDataUsers","firstName","lastName","email","phoneNumber","address","valueIsLoading","passwordNew","passwordNewRepeat","isLoading","updateData","name","state","firstNameInput","firstNameSymbol","lastNameInput","lastNameSymbol","emailInput","emailSymbol","passwordNewInput","passwordNewSymbol","passwordRepeatInput","passwordRepeatSymbol","pages","loginPersonalAccountReducer","clientEmail","setIsPersonalInformationVisible","handleButtonClick","event","target","e","Component","ConnectedPersonaIformation"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport setErrorNotNull from '../../../common/untils/setErrorNotNull';\nimport InputWitchCkeckingNotNull from '../../../common/input/components/InputWitchCkeckingNotNullComponent';\nimport formatPhoneNumber from '../../../common/untils/formatPhoneNumber';\nimport PopUp from '../../../common/popup/components/PopUpComponent';\nimport PopUpSomethingWentWrong from '../../../common/popup/components/PopUpSomethingWentWrongComponent';\nimport getUsers from '../api/get/getUsers';\nimport postChangeUserInformation from '../api/post/postChangeUserInformation';\n\nclass PersonaIformation extends React.Component {\n  _isMounted = false;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstName: '',\n      firstNameInput: 'firstNameInput',\n      firstNameSymbol: 'firstNameSymbol',\n      lastName: '',\n      lastNameInput: 'lastNameInput',\n      lastNameSymbol: 'lastNameSymbol',\n      email: '',\n      emailInput: 'emailInput',\n      emailSymbol: 'emailSymbol',\n      phoneNumber: '+375(__)___-__-__',\n      address: '',\n      passwordNew: '',\n      passwordNewInput: 'passwordNewInput',\n      passwordNewSymbol: 'errorSymbolPasswordNew',\n      passwordNewRepeat: '',\n      passwordRepeatInput: 'passwordNewRepeatInput',\n      passwordRepeatSymbol: 'errorSymbolPasswordNewRepeat',\n      popupSmthWentWrongActive: true,\n      isLoading: false,\n      ErrorMessage: '',\n    };\n  }\n\n  async componentDidMount() {\n    this._isMounted = true;\n    const { pages } = this.props;\n    await getUsers(\n      pages.loginPersonalAccountReducer.clientEmail,\n      this.updateDataUsers, this.setError,\n    );\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  setError = (errorMessage) => { this.setState({ ErrorMessage: errorMessage }); }\n\n  setpopupSmthWentWrongActive = (value) => { this.setState({ popupSmthWentWrongActive: value }); }\n\n  updateDataUsers = (firstName, lastName,\n    email, phoneNumber, address, valueIsLoading, passwordNew) => {\n    if (this._isMounted) {\n      this.setState({\n        firstName,\n        lastName,\n        email,\n        phoneNumber,\n        address,\n        passwordNew,\n        passwordNewRepeat: passwordNew,\n        isLoading: valueIsLoading,\n      });\n    }\n  }\n\n  updateData = (value, name) => {\n    if (name === 'firstName') { this.setState({ firstName: value }); }\n    if (name === 'lastName') { this.setState({ lastName: value }); }\n    if (name === 'email') { this.setState({ email: value }); }\n    if (name === 'passwordNew') { this.setState({ passwordNew: value }); }\n    if (name === 'passwordNewRepeat') { this.setState({ passwordNewRepeat: value }); }\n  }\n\n  render() {\n    const {\n      firstName, firstNameInput, firstNameSymbol,\n      lastName, lastNameInput, lastNameSymbol,\n      email, emailInput, emailSymbol,\n      phoneNumber, address,\n      passwordNew, passwordNewInput, passwordNewSymbol,\n      passwordNewRepeat, passwordRepeatInput, passwordRepeatSymbol,\n      popupSmthWentWrongActive, isLoading, ErrorMessage,\n    } = this.state;\n    const { setIsPersonalInformationVisible } = this.props;\n\n    async function handleButtonClick() {\n      await postChangeUserInformation(\n        firstName, lastName, email, passwordNew, phoneNumber, address,\n      );\n    }\n\n    if (!isLoading) {\n      return <div className=\"-isLoading\"> </div>;\n    }\n    if (ErrorMessage) {\n      return (\n        <PopUp\n          active={popupSmthWentWrongActive}\n          setActive={this.setpopupSmthWentWrongActive}\n        >\n          <PopUpSomethingWentWrong\n            text=\"Попробуйте еще раз\"\n            setpopupSmthWentWrongActive={this.setpopupSmthWentWrongActive}\n          />\n        </PopUp>\n      );\n    }\n    return (\n      <div className=\"personalInformation-wrap\">\n        <form className=\"personalInformation\">\n          <div className=\"firstName\">\n            <p className=\"firstNameString -required\">Имя:</p>\n            <InputWitchCkeckingNotNull\n              initialValue={firstName}\n              type=\"text\"\n              name=\"firstName\"\n              classInput={firstNameInput}\n              classSymbol={firstNameSymbol}\n              updateData={this.updateData}\n            />\n          </div>\n          <div className=\"lastName\">\n            <p className=\"lastNameString -required\">Фамилия:</p>\n            <InputWitchCkeckingNotNull\n              initialValue={lastName}\n              type=\"text\"\n              name=\"lastName\"\n              classInput={lastNameInput}\n              classSymbol={lastNameSymbol}\n              updateData={this.updateData}\n            />\n          </div>\n          <div className=\"email\">\n            <p className=\"emailString -required\">Email:</p>\n            <InputWitchCkeckingNotNull\n              initialValue={email}\n              type=\"email\"\n              name=\"email\"\n              classInput={emailInput}\n              classSymbol={emailSymbol}\n              updateData={this.updateData}\n            />\n          </div>\n          <div className=\"phone\">\n            <p className=\"phoneString\">Телефон:</p>\n            <input\n              className=\"phoneInput\"\n              name=\"PHONE\"\n              type=\"tel\"\n              minLength=\"13\"\n              maxLength=\"13\"\n              placeholder=\"+375 (__) ___-__-__\"\n              value={phoneNumber}\n              onFocus={() => this.setState({ phoneNumber: '+375' })}\n              onChange={(event) => {\n                this.setState({\n                  phoneNumber: formatPhoneNumber(event.target.value),\n                });\n              }}\n            />\n          </div>\n          <div className=\"address\">\n            <p className=\"addressString\">Адрес:</p>\n            <input\n              className=\"addressInput\"\n              type=\"text\"\n              name=\"address\"\n              value={address}\n              onChange={(e) => {\n                this.setState({\n                  address: e.target.value,\n                });\n              }}\n            />\n          </div>\n          <div className=\"passwordNew\">\n            <p className=\"passwordNewString -required\">Пароль:</p>\n            <InputWitchCkeckingNotNull\n              initialValue={passwordNew}\n              type=\"password\"\n              name=\"passwordNew\"\n              classInput={passwordNewInput}\n              classSymbol={passwordNewSymbol}\n              updateData={this.updateData}\n            />\n          </div>\n          <div className=\"passwordNewRepeat\">\n            <p className=\"passwordNewRepeatString -required\">Повторите пароль:</p>\n            <InputWitchCkeckingNotNull\n              initialValue={passwordNewRepeat}\n              type=\"password\"\n              name=\"passwordNewRepeat\"\n              classInput={passwordRepeatInput}\n              classSymbol={passwordRepeatSymbol}\n              updateData={this.updateData}\n            />\n          </div>\n          {(firstName && lastName && email && passwordNew && passwordNewRepeat)\n  && (passwordNew === passwordNewRepeat) ? (\n    <button\n      type=\"button\"\n      className=\"changePasswordButton\"\n      onClick={() => {\n        handleButtonClick();\n        setIsPersonalInformationVisible(false);\n      }}\n    >\n      Сохранить\n    </button>\n            ) : (\n              <button\n                type=\"button\"\n                className=\"changePasswordButton\"\n                onClick={() => {\n                  if (!firstName) {\n                    setErrorNotNull(firstNameInput, firstNameSymbol);\n                  } if (!lastName) {\n                    setErrorNotNull(lastNameInput, lastNameSymbol);\n                  } if (!email) {\n                    setErrorNotNull(emailInput, emailSymbol);\n                  } if (!passwordNew) {\n                    setErrorNotNull(passwordNewInput, passwordNewSymbol);\n                  } if (passwordNew !== passwordNewRepeat) {\n                    setErrorNotNull(passwordRepeatInput, passwordRepeatSymbol);\n                  }\n                }}\n              >\n                Сохранить\n              </button>\n            )}\n        </form>\n      </div>\n    );\n  }\n}\n\nconst ConnectedPersonaIformation = connect(\n  (state) => ({\n    pages: state,\n  }),\n)(PersonaIformation);\n\nexport default ConnectedPersonaIformation;\n"]},"metadata":{},"sourceType":"module"}