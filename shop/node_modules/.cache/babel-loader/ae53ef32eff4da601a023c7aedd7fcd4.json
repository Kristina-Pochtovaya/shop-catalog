{"ast":null,"code":"import { configure } from 'enzyme';\nimport axios from 'axios';\nimport Adapter from 'enzyme-adapter-react-16';\nimport postUserPhoto from './postUserPhotoRequest';\nimport serverUrl from '../../../../common/constants/urls';\nconfigure({\n  adapter: new Adapter()\n});\ndescribe('Items API', () => {\n  beforeAll(() => jest.spyOn(window, 'fetch'));\n  const data = {\n    email: 'pul@gmail.com',\n    incorrectEmail: '1254dsfgs@mail.ru',\n    avatar: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgHXjcWFcu7ajK9jYU4HfqWMAchk79nZ2eXNV1+mI'\n  };\n  const mySetClassIncorrectUser = jest.fn(() => true);\n  test('it return avatar if email is exists', async () => {\n    const DB = {\n      email: 'pul@gmail.com',\n      avatar: 'data:image/png;base64,testesttertesttsrdtswftttest'\n    };\n    const myPostUserPhoto = jest.spyOn(window, 'fetch').mockImplementation(userAvatar => {\n      let result = '';\n\n      if (userAvatar.email === DB.email) {\n        result = DB.avatar;\n      } else {\n        result = userAvatar.avatar;\n      }\n\n      return Promise.resolve(result);\n    });\n    const response = await myPostUserPhoto(data);\n    expect(response).toEqual(DB.avatar);\n  });\n  test('it returns false if user email is not in DB', async () => {\n    expect.assertions(1);\n    const response = await postUserPhoto(data.incorrectEmail, data.avatar, mySetClassIncorrectUser);\n    expect(response).toEqual(false);\n  });\n  test('it returns false when error occurs', async () => {\n    expect.assertions(1);\n\n    async function postUsersRolesFail(email, avatar, functiontest) {\n      const payload = {\n        data: {\n          email: 'pul@gmail.com',\n          avatar: 'data:image/png;base64,testesttertesttsrdtswftttest'\n        }\n      };\n\n      try {\n        const response = await axios.post(`${serverUrl}/avatarfail`, payload);\n        const result = response.data;\n        return result;\n      } catch (error) {\n        return false;\n      }\n    }\n\n    const error = await postUsersRolesFail(data.email);\n    await expect(error).toBe(false);\n    window.fetch.mockRestore();\n  });\n});","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/personalAccount/api/post/postChangeUserInformation.jsx"],"names":["configure","axios","Adapter","postUserPhoto","serverUrl","adapter","describe","beforeAll","jest","spyOn","window","data","email","incorrectEmail","avatar","mySetClassIncorrectUser","fn","test","DB","myPostUserPhoto","mockImplementation","userAvatar","result","Promise","resolve","response","expect","toEqual","assertions","postUsersRolesFail","functiontest","payload","post","error","toBe","fetch","mockRestore"],"mappings":"AAAA,SAASA,SAAT,QAA0B,QAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,yBAApB;AACA,OAAOC,aAAP,MAA0B,wBAA1B;AACA,OAAOC,SAAP,MAAsB,mCAAtB;AAEAJ,SAAS,CAAC;AAAEK,EAAAA,OAAO,EAAE,IAAIH,OAAJ;AAAX,CAAD,CAAT;AAEAI,QAAQ,CAAC,WAAD,EAAc,MAAM;AAC1BC,EAAAA,SAAS,CAAC,MAAMC,IAAI,CAACC,KAAL,CAAWC,MAAX,EAAmB,OAAnB,CAAP,CAAT;AAEA,QAAMC,IAAI,GAAG;AACXC,IAAAA,KAAK,EAAE,eADI;AAEXC,IAAAA,cAAc,EAAE,mBAFL;AAGXC,IAAAA,MAAM,EAAE;AAHG,GAAb;AAMA,QAAMC,uBAAuB,GAAGP,IAAI,CAACQ,EAAL,CAAQ,MAAM,IAAd,CAAhC;AAEAC,EAAAA,IAAI,CAAC,qCAAD,EAAwC,YAAY;AACtD,UAAMC,EAAE,GAAG;AACTN,MAAAA,KAAK,EAAE,eADE;AAETE,MAAAA,MAAM,EAAE;AAFC,KAAX;AAIA,UAAMK,eAAe,GAAGX,IAAI,CAACC,KAAL,CAAWC,MAAX,EAAmB,OAAnB,EAA4BU,kBAA5B,CAAgDC,UAAD,IAAgB;AACrF,UAAIC,MAAM,GAAG,EAAb;;AACA,UAAID,UAAU,CAACT,KAAX,KAAqBM,EAAE,CAACN,KAA5B,EAAmC;AACjCU,QAAAA,MAAM,GAAGJ,EAAE,CAACJ,MAAZ;AACD,OAFD,MAEO;AACLQ,QAAAA,MAAM,GAAGD,UAAU,CAACP,MAApB;AACD;;AACD,aAAOS,OAAO,CAACC,OAAR,CAAgBF,MAAhB,CAAP;AACD,KARuB,CAAxB;AASA,UAAMG,QAAQ,GAAG,MAAMN,eAAe,CAACR,IAAD,CAAtC;AACAe,IAAAA,MAAM,CAACD,QAAD,CAAN,CAAiBE,OAAjB,CAAyBT,EAAE,CAACJ,MAA5B;AACD,GAhBG,CAAJ;AAkBAG,EAAAA,IAAI,CAAC,6CAAD,EAAgD,YAAY;AAC9DS,IAAAA,MAAM,CAACE,UAAP,CAAkB,CAAlB;AACA,UAAMH,QAAQ,GAAG,MAAMtB,aAAa,CAACQ,IAAI,CAACE,cAAN,EAAsBF,IAAI,CAACG,MAA3B,EAAmCC,uBAAnC,CAApC;AACAW,IAAAA,MAAM,CAACD,QAAD,CAAN,CAAiBE,OAAjB,CAAyB,KAAzB;AACD,GAJG,CAAJ;AAMAV,EAAAA,IAAI,CAAC,oCAAD,EAAuC,YAAY;AACrDS,IAAAA,MAAM,CAACE,UAAP,CAAkB,CAAlB;;AACA,mBAAeC,kBAAf,CAAkCjB,KAAlC,EAAyCE,MAAzC,EAAiDgB,YAAjD,EAA+D;AAC7D,YAAMC,OAAO,GAAG;AACdpB,QAAAA,IAAI,EAAE;AACJC,UAAAA,KAAK,EAAE,eADH;AAEJE,UAAAA,MAAM,EAAE;AAFJ;AADQ,OAAhB;;AAOA,UAAI;AACF,cAAMW,QAAQ,GAAG,MAAMxB,KAAK,CAAC+B,IAAN,CAAY,GAAE5B,SAAU,aAAxB,EAAsC2B,OAAtC,CAAvB;AACA,cAAMT,MAAM,GAAGG,QAAQ,CAACd,IAAxB;AACA,eAAOW,MAAP;AACD,OAJD,CAIE,OAAOW,KAAP,EAAc;AACd,eAAO,KAAP;AACD;AACF;;AAED,UAAMA,KAAK,GAAG,MAAMJ,kBAAkB,CAAClB,IAAI,CAACC,KAAN,CAAtC;AACA,UAAMc,MAAM,CAACO,KAAD,CAAN,CAAcC,IAAd,CAAmB,KAAnB,CAAN;AACAxB,IAAAA,MAAM,CAACyB,KAAP,CAAaC,WAAb;AACD,GAtBG,CAAJ;AAuBD,CA1DO,CAAR","sourcesContent":["import { configure } from 'enzyme';\nimport axios from 'axios';\nimport Adapter from 'enzyme-adapter-react-16';\nimport postUserPhoto from './postUserPhotoRequest';\nimport serverUrl from '../../../../common/constants/urls';\n\nconfigure({ adapter: new Adapter() });\n\ndescribe('Items API', () => {\n  beforeAll(() => jest.spyOn(window, 'fetch'));\n\n  const data = {\n    email: 'pul@gmail.com',\n    incorrectEmail: '1254dsfgs@mail.ru',\n    avatar: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgHXjcWFcu7ajK9jYU4HfqWMAchk79nZ2eXNV1+mI',\n  };\n\n  const mySetClassIncorrectUser = jest.fn(() => true);\n\n  test('it return avatar if email is exists', async () => {\n    const DB = {\n      email: 'pul@gmail.com',\n      avatar: 'data:image/png;base64,testesttertesttsrdtswftttest',\n    };\n    const myPostUserPhoto = jest.spyOn(window, 'fetch').mockImplementation((userAvatar) => {\n      let result = '';\n      if (userAvatar.email === DB.email) {\n        result = DB.avatar;\n      } else {\n        result = userAvatar.avatar;\n      }\n      return Promise.resolve(result);\n    });\n    const response = await myPostUserPhoto(data);\n    expect(response).toEqual(DB.avatar);\n  });\n\n  test('it returns false if user email is not in DB', async () => {\n    expect.assertions(1);\n    const response = await postUserPhoto(data.incorrectEmail, data.avatar, mySetClassIncorrectUser);\n    expect(response).toEqual(false);\n  });\n\n  test('it returns false when error occurs', async () => {\n    expect.assertions(1);\n    async function postUsersRolesFail(email, avatar, functiontest) {\n      const payload = {\n        data: {\n          email: 'pul@gmail.com',\n          avatar: 'data:image/png;base64,testesttertesttsrdtswftttest',\n        },\n      };\n\n      try {\n        const response = await axios.post(`${serverUrl}/avatarfail`, payload);\n        const result = response.data;\n        return result;\n      } catch (error) {\n        return false;\n      }\n    }\n\n    const error = await postUsersRolesFail(data.email);\n    await expect(error).toBe(false);\n    window.fetch.mockRestore();\n  });\n});\n"]},"metadata":{},"sourceType":"module"}