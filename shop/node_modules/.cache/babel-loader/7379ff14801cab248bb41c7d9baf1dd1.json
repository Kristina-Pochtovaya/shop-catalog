{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import ConnectedHeader from'../../main/header/container/HeaderContainer';import Footer from'../../main/footer/components/FooterComponent';import FormAddProduct from'./FormAddProductComponent';import PopUpErrorLoading from'../../../common/components/popup/components/PopUpErrorLoadingComponent';import getCategories from'../../editCategory/api/get/getCategories';import checkOnlyNumbers from'../../../common/utils/checkOnlyNumbers';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddProductPage=/*#__PURE__*/function(_React$Component){_inherits(AddProductPage,_React$Component);var _super=_createSuper(AddProductPage);function AddProductPage(props){var _this;_classCallCheck(this,AddProductPage);_this=_super.call(this,props);_this._isMounted=false;_this.setError=function(value){_this.setState({errorMessage:value});};_this.setpopupSmthWentWrongActive=function(value){_this.setState({popupSmthWentWrongActive:value});};_this.updateDataCategories=function(value,valueIsLoading){if(_this._isMounted){_this.setState({categoriesArray:value,isLoading:valueIsLoading});}};_this.updateData=function(name,e){if(name==='categoryName')_this.setState({categoryName:e.target.value});if(name==='productName')_this.setState({productName:e.target.value});if(name==='productPrice')_this.setState({productPrice:e.target.value});if(name==='productInStock')_this.setState({productInStock:e.target.value});if(name==='onBlur'){_this.setState({isPriceCorrect:checkOnlyNumbers(e.target.value),productPrice:\"\".concat(e.target.value,\" \\u0420\\u0423\\u0411.\")});}};_this.updateImage=function(value){_this.setState({image:value});};_this.state={productName:'',image:'',categoryName:'Электротовары и свет',productPrice:'',productInStock:'да',categoriesArray:[],errorMessage:'',isLoading:false,popupSmthWentWrongActive:true,isPriceCorrect:false};return _this;}_createClass(AddProductPage,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this._isMounted=true;_context.next=3;return getCategories(this.updateDataCategories,this.setError);case 3:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"render\",value:function render(){var _this$state=this.state,errorMessage=_this$state.errorMessage,isLoading=_this$state.isLoading,popupSmthWentWrongActive=_this$state.popupSmthWentWrongActive,image=_this$state.image,productName=_this$state.productName,categoryName=_this$state.categoryName,productPrice=_this$state.productPrice,productInStock=_this$state.productInStock,categoriesArray=_this$state.categoriesArray,isPriceCorrect=_this$state.isPriceCorrect;var _this$props=this.props,history=_this$props.history,isProductsUpdated=_this$props.isProductsUpdated,setIsProductsUpdated=_this$props.setIsProductsUpdated,pages=_this$props.pages;if(!isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"-isLoading\",children:\" \"});}if(errorMessage){return/*#__PURE__*/_jsx(PopUpErrorLoading,{popupSmthWentWrongActive:popupSmthWentWrongActive,setpopupSmthWentWrongActive:this.setpopupSmthWentWrongActive});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ConnectedHeader,{linkItem:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"buttonBack\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),link:\"/personal\",disabled:false}),pages.loginPersonalAccountReducer.personAccountIsVisible?/*#__PURE__*/_jsxs(\"div\",{className:\"addProduct-box\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\"}),/*#__PURE__*/_jsx(\"div\",{className:\"addProduct-container\",children:/*#__PURE__*/_jsx(FormAddProduct,{updateData:this.updateData,updateImage:this.updateImage,state:this.state,history:history,isProductsUpdated:isProductsUpdated,setIsProductsUpdated:setIsProductsUpdated})})]}):null,/*#__PURE__*/_jsx(Footer,{})]});}}]);return AddProductPage;}(React.Component);export default AddProductPage;","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/editProducts/components/AddProductPageComponent.jsx"],"names":["React","ConnectedHeader","Footer","FormAddProduct","PopUpErrorLoading","getCategories","checkOnlyNumbers","AddProductPage","props","_isMounted","setError","value","setState","errorMessage","setpopupSmthWentWrongActive","popupSmthWentWrongActive","updateDataCategories","valueIsLoading","categoriesArray","isLoading","updateData","name","e","categoryName","target","productName","productPrice","productInStock","isPriceCorrect","updateImage","image","state","history","isProductsUpdated","setIsProductsUpdated","pages","loginPersonalAccountReducer","personAccountIsVisible","Component"],"mappings":"yqCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,eAAP,KAA4B,6CAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,8CAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,2BAA3B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,wEAA9B,CACA,MAAOC,CAAAA,aAAP,KAA0B,0CAA1B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,wCAA7B,C,gJAEMC,CAAAA,c,4HAGJ,wBAAYC,KAAZ,CAAmB,gDACjB,uBAAMA,KAAN,EADiB,MAFnBC,UAEmB,CAFN,KAEM,OAyBnBC,QAzBmB,CAyBR,SAACC,KAAD,CAAW,CAAE,MAAKC,QAAL,CAAc,CAAEC,YAAY,CAAEF,KAAhB,CAAd,EAAyC,CAzB9C,OA2BnBG,2BA3BmB,CA2BW,SAACH,KAAD,CAAW,CAAE,MAAKC,QAAL,CAAc,CAAEG,wBAAwB,CAAEJ,KAA5B,CAAd,EAAqD,CA3B7E,OA6BnBK,oBA7BmB,CA6BI,SAACL,KAAD,CAAQM,cAAR,CAA2B,CAChD,GAAI,MAAKR,UAAT,CAAqB,CACnB,MAAKG,QAAL,CAAc,CACZM,eAAe,CAAEP,KADL,CAEZQ,SAAS,CAAEF,cAFC,CAAd,EAID,CACF,CApCkB,OAsCnBG,UAtCmB,CAsCN,SAACC,IAAD,CAAOC,CAAP,CAAa,CACxB,GAAID,IAAI,GAAK,cAAb,CAA6B,MAAKT,QAAL,CAAc,CAAEW,YAAY,CAAED,CAAC,CAACE,MAAF,CAASb,KAAzB,CAAd,EAC7B,GAAIU,IAAI,GAAK,aAAb,CAA4B,MAAKT,QAAL,CAAc,CAAEa,WAAW,CAAEH,CAAC,CAACE,MAAF,CAASb,KAAxB,CAAd,EAC5B,GAAIU,IAAI,GAAK,cAAb,CAA6B,MAAKT,QAAL,CAAc,CAAEc,YAAY,CAAEJ,CAAC,CAACE,MAAF,CAASb,KAAzB,CAAd,EAC7B,GAAIU,IAAI,GAAK,gBAAb,CAA+B,MAAKT,QAAL,CAAc,CAAEe,cAAc,CAAEL,CAAC,CAACE,MAAF,CAASb,KAA3B,CAAd,EAC/B,GAAIU,IAAI,GAAK,QAAb,CAAuB,CACrB,MAAKT,QAAL,CAAc,CACZgB,cAAc,CAAEtB,gBAAgB,CAACgB,CAAC,CAACE,MAAF,CAASb,KAAV,CADpB,CAEZe,YAAY,WAAKJ,CAAC,CAACE,MAAF,CAASb,KAAd,wBAFA,CAAd,EAID,CACF,CAjDkB,OAmDnBkB,WAnDmB,CAmDL,SAAClB,KAAD,CAAW,CAAE,MAAKC,QAAL,CAAc,CAAEkB,KAAK,CAAEnB,KAAT,CAAd,EAAkC,CAnD1C,CAEjB,MAAKoB,KAAL,CAAa,CACXN,WAAW,CAAE,EADF,CAEXK,KAAK,CAAE,EAFI,CAGXP,YAAY,CAAE,sBAHH,CAIXG,YAAY,CAAE,EAJH,CAKXC,cAAc,CAAE,IALL,CAMXT,eAAe,CAAE,EANN,CAOXL,YAAY,CAAE,EAPH,CAQXM,SAAS,CAAE,KARA,CASXJ,wBAAwB,CAAE,IATf,CAUXa,cAAc,CAAE,KAVL,CAAb,CAFiB,aAclB,C,sJAED,mIACE,KAAKnB,UAAL,CAAkB,IAAlB,CADF,sBAEQJ,CAAAA,aAAa,CAAC,KAAKW,oBAAN,CAA4B,KAAKN,QAAjC,CAFrB,4D,iJAKA,+BAAuB,CACrB,KAAKD,UAAL,CAAkB,KAAlB,CACD,C,sBA8BD,iBAAS,iBAIH,KAAKsB,KAJF,CAELlB,YAFK,aAELA,YAFK,CAESM,SAFT,aAESA,SAFT,CAEoBJ,wBAFpB,aAEoBA,wBAFpB,CAE8Ce,KAF9C,aAE8CA,KAF9C,CAEqDL,WAFrD,aAEqDA,WAFrD,CAGLF,YAHK,aAGLA,YAHK,CAGSG,YAHT,aAGSA,YAHT,CAGuBC,cAHvB,aAGuBA,cAHvB,CAGuCT,eAHvC,aAGuCA,eAHvC,CAGwDU,cAHxD,aAGwDA,cAHxD,iBAOH,KAAKpB,KAPF,CAMLwB,OANK,aAMLA,OANK,CAMIC,iBANJ,aAMIA,iBANJ,CAMuBC,oBANvB,aAMuBA,oBANvB,CAM6CC,KAN7C,aAM6CA,KAN7C,CASP,GAAI,CAAChB,SAAL,CAAgB,CACd,mBAAO,YAAK,SAAS,CAAC,YAAf,eAAP,CACD,CACD,GAAIN,YAAJ,CAAkB,CAChB,mBACE,KAAC,iBAAD,EACE,wBAAwB,CAAEE,wBAD5B,CAEE,2BAA2B,CAAE,KAAKD,2BAFpC,EADF,CAMD,CACD,mBACE,wCACE,KAAC,eAAD,EAAiB,QAAQ,cAAE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,YAAhC,4CAA3B,CAAwF,IAAI,CAAC,WAA7F,CAAyG,QAAQ,CAAE,KAAnH,EADF,CAEGqB,KAAK,CAACC,2BAAN,CAAkCC,sBAAlC,cACC,aAAK,SAAS,CAAC,gBAAf,wBACE,WAAI,SAAS,CAAC,EAAd,6FADF,cAEE,YAAK,SAAS,CAAC,sBAAf,uBACE,KAAC,cAAD,EACE,UAAU,CAAE,KAAKjB,UADnB,CAEE,WAAW,CAAE,KAAKS,WAFpB,CAGE,KAAK,CAAE,KAAKE,KAHd,CAIE,OAAO,CAAEC,OAJX,CAKE,iBAAiB,CAAEC,iBALrB,CAME,oBAAoB,CAAEC,oBANxB,EADF,EAFF,GADD,CAcG,IAhBN,cAiBE,KAAC,MAAD,IAjBF,GADF,CAqBD,C,4BAjG0BlC,KAAK,CAACsC,S,EAoGnC,cAAe/B,CAAAA,cAAf","sourcesContent":["import React from 'react';\nimport ConnectedHeader from '../../main/header/container/HeaderContainer';\nimport Footer from '../../main/footer/components/FooterComponent';\nimport FormAddProduct from './FormAddProductComponent';\nimport PopUpErrorLoading from '../../../common/components/popup/components/PopUpErrorLoadingComponent';\nimport getCategories from '../../editCategory/api/get/getCategories';\nimport checkOnlyNumbers from '../../../common/utils/checkOnlyNumbers';\n\nclass AddProductPage extends React.Component {\n  _isMounted = false;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      productName: '',\n      image: '',\n      categoryName: 'Электротовары и свет',\n      productPrice: '',\n      productInStock: 'да',\n      categoriesArray: [],\n      errorMessage: '',\n      isLoading: false,\n      popupSmthWentWrongActive: true,\n      isPriceCorrect: false,\n    };\n  }\n\n  async componentDidMount() {\n    this._isMounted = true;\n    await getCategories(this.updateDataCategories, this.setError);\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  setError = (value) => { this.setState({ errorMessage: value }); }\n\n  setpopupSmthWentWrongActive = (value) => { this.setState({ popupSmthWentWrongActive: value }); }\n\n  updateDataCategories = (value, valueIsLoading) => {\n    if (this._isMounted) {\n      this.setState({\n        categoriesArray: value,\n        isLoading: valueIsLoading,\n      });\n    }\n  }\n\n  updateData = (name, e) => {\n    if (name === 'categoryName') this.setState({ categoryName: e.target.value });\n    if (name === 'productName') this.setState({ productName: e.target.value });\n    if (name === 'productPrice') this.setState({ productPrice: e.target.value });\n    if (name === 'productInStock') this.setState({ productInStock: e.target.value });\n    if (name === 'onBlur') {\n      this.setState({\n        isPriceCorrect: checkOnlyNumbers(e.target.value),\n        productPrice: `${e.target.value} РУБ.`,\n      });\n    }\n  }\n\n  updateImage = (value) => { this.setState({ image: value }); }\n\n  render() {\n    const {\n      errorMessage, isLoading, popupSmthWentWrongActive, image, productName,\n      categoryName, productPrice, productInStock, categoriesArray, isPriceCorrect,\n    } = this.state;\n    const {\n      history, isProductsUpdated, setIsProductsUpdated, pages,\n    } = this.props;\n\n    if (!isLoading) {\n      return <div className=\"-isLoading\"> </div>;\n    }\n    if (errorMessage) {\n      return (\n        <PopUpErrorLoading\n          popupSmthWentWrongActive={popupSmthWentWrongActive}\n          setpopupSmthWentWrongActive={this.setpopupSmthWentWrongActive}\n        />\n      );\n    }\n    return (\n      <>\n        <ConnectedHeader linkItem={<button type=\"button\" className=\"buttonBack\">Назад</button>} link=\"/personal\" disabled={false} />\n        {pages.loginPersonalAccountReducer.personAccountIsVisible ? (\n          <div className=\"addProduct-box\">\n            <h2 className=\"\">Добавить товар</h2>\n            <div className=\"addProduct-container\">\n              <FormAddProduct\n                updateData={this.updateData}\n                updateImage={this.updateImage}\n                state={this.state}\n                history={history}\n                isProductsUpdated={isProductsUpdated}\n                setIsProductsUpdated={setIsProductsUpdated}\n              />\n            </div>\n          </div>\n        ) : null}\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default AddProductPage;\n"]},"metadata":{},"sourceType":"module"}