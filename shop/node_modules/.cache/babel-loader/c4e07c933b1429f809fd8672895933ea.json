{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{withRouter}from'react-router-dom';import Header from'../../main/header/components/HeaderComponent';import Footer from'../../main/footer/components/FooterComponent';import AddCategoryImage from'./AddCategoryImageComponent';import PopUp from'../../../common/popup/components/PopUpComponent';import PopUpSomethingWentWrong from'../../../common/popup/components/PopUpSomethingWentWrongComponent';import postNewCategory from'../api/post/postNewCategory';import getCategories from'../../editCategory/api/get/getCategories';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AddCategoryPage=/*#__PURE__*/function(_React$Component){_inherits(AddCategoryPage,_React$Component);var _super=_createSuper(AddCategoryPage);function AddCategoryPage(props){var _this;_classCallCheck(this,AddCategoryPage);_this=_super.call(this,props);_this.state={productName:'',image:'',titleColor:'1',categoriesArray:[],errorMessage:'',isLoading:false,popupSmthWentWrongActive:true};_this.updateImage=_this.updateImage.bind(_assertThisInitialized(_this));_this.setError=_this.setError.bind(_assertThisInitialized(_this));_this.updateDataCategories=_this.updateDataCategories.bind(_assertThisInitialized(_this));_this.setpopupSmthWentWrongActive=_this.setpopupSmthWentWrongActive.bind(_assertThisInitialized(_this));return _this;}_createClass(AddCategoryPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getCategories(_this2.updateDataCategories,_this2.setError);case 2:case\"end\":return _context.stop();}}},_callee);})),10);}},{key:\"setError\",value:function setError(value){this.setState({errorMessage:value});}},{key:\"setpopupSmthWentWrongActive\",value:function setpopupSmthWentWrongActive(value){this.setState({popupSmthWentWrongActive:value});}},{key:\"updateDataCategories\",value:function updateDataCategories(value,valueIsLoading){this.setState({categoriesArray:value,isLoading:valueIsLoading});}},{key:\"updateImage\",value:function updateImage(value){this.setState({image:value});}},{key:\"render\",value:function render(){var _this3=this;function handleButtonClick(){return _handleButtonClick.apply(this,arguments);}function _handleButtonClick(){_handleButtonClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var errorImage,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:errorImage=document.getElementById('errorNewImage');_context2.next=3;return postNewCategory(productName,image,titleColor);case 3:result=_context2.sent;if(result===true){history.push('/edit-category');}if(result===false){errorImage.setAttribute('class','errorNewImage');}case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _handleButtonClick.apply(this,arguments);}var _this$state=this.state,productName=_this$state.productName,image=_this$state.image,titleColor=_this$state.titleColor,categoriesArray=_this$state.categoriesArray,errorMessage=_this$state.errorMessage,isLoading=_this$state.isLoading,popupSmthWentWrongActive=_this$state.popupSmthWentWrongActive;var history=this.props.history;if(!isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"-isLoading\",children:\" \"});}if(errorMessage){return/*#__PURE__*/_jsx(PopUp,{active:popupSmthWentWrongActive,setActive:this.setpopupSmthWentWrongActive,children:/*#__PURE__*/_jsx(PopUpSomethingWentWrong,{text:\"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0435\\u0449\\u0435 \\u0440\\u0430\\u0437\",setpopupSmthWentWrongActive:this.setpopupSmthWentWrongActive})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{linkItem:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"buttonBack\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),link:\"/personal\",disabled:false}),/*#__PURE__*/_jsxs(\"div\",{className:\"addProduct-box\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"addProduct-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"categoryColorString\",children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"select\",{className:\"productsCategories\",onChange:function onChange(event){return _this3.setState({titleColor:event.target.value});},children:categoriesArray.categories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{value:category.category,children:category.category},category.id);})}),/*#__PURE__*/_jsx(\"p\",{className:\"productNameString\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"productNameInput\",value:productName,onChange:function onChange(e){return _this3.setState({productName:e.target.value});}}),/*#__PURE__*/_jsx(\"p\",{className:\"productNameString\",children:\"\\u0426\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"productNameInput\",value:productName,onChange:function onChange(e){return _this3.setState({productName:e.target.value});}}),/*#__PURE__*/_jsx(\"p\",{className:\"categoryColorString\",children:\"\\u0412 \\u043D\\u0430\\u043B\\u0438\\u0447\\u0438\\u0438\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"imageColors\",onChange:function onChange(event){return _this3.setState({titleColor:event.target.value});},children:[/*#__PURE__*/_jsx(\"option\",{value:true,defaultValue:true,children:\"\\u0434\\u0430\"}),/*#__PURE__*/_jsx(\"option\",{value:false,children:\"\\u043D\\u0435\\u0442\"})]}),/*#__PURE__*/_jsx(AddCategoryImage,{updateImage:this.updateImage}),/*#__PURE__*/_jsx(\"button\",{className:\"addNewCategoryButton\",type:\"button\",onClick:function onClick(){return handleButtonClick();},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return AddCategoryPage;}(React.Component);export default withRouter(AddCategoryPage);","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/editProducts/components/AddProductPageComponent.jsx"],"names":["React","withRouter","Header","Footer","AddCategoryImage","PopUp","PopUpSomethingWentWrong","postNewCategory","getCategories","AddCategoryPage","props","state","productName","image","titleColor","categoriesArray","errorMessage","isLoading","popupSmthWentWrongActive","updateImage","bind","setError","updateDataCategories","setpopupSmthWentWrongActive","interval","setTimeout","value","setState","valueIsLoading","handleButtonClick","errorImage","document","getElementById","result","history","push","setAttribute","event","target","categories","map","category","id","e","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport Header from '../../main/header/components/HeaderComponent';\nimport Footer from '../../main/footer/components/FooterComponent';\nimport AddCategoryImage from './AddCategoryImageComponent';\nimport PopUp from '../../../common/popup/components/PopUpComponent';\nimport PopUpSomethingWentWrong from '../../../common/popup/components/PopUpSomethingWentWrongComponent';\nimport postNewCategory from '../api/post/postNewCategory';\nimport getCategories from '../../editCategory/api/get/getCategories';\n\nclass AddCategoryPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      productName: '',\n      image: '',\n      titleColor: '1',\n      categoriesArray: [],\n      errorMessage: '',\n      isLoading: false,\n      popupSmthWentWrongActive: true,\n    };\n    this.updateImage = this.updateImage.bind(this);\n    this.setError = this.setError.bind(this);\n    this.updateDataCategories = this.updateDataCategories.bind(this);\n    this.setpopupSmthWentWrongActive = this.setpopupSmthWentWrongActive.bind(this);\n  }\n\n  componentDidMount() {\n    this.interval = setTimeout(async () => {\n      await getCategories(this.updateDataCategories, this.setError);\n    }, 10);\n  }\n\n  setError(value) {\n    this.setState({\n      errorMessage: value,\n    });\n  }\n\n  setpopupSmthWentWrongActive(value) {\n    this.setState({\n      popupSmthWentWrongActive: value,\n    });\n  }\n\n  updateDataCategories(value, valueIsLoading) {\n    this.setState({\n      categoriesArray: value,\n      isLoading: valueIsLoading,\n    });\n  }\n\n  updateImage(value) {\n    this.setState({ image: value });\n  }\n\n  render() {\n    async function handleButtonClick() {\n      const errorImage = document.getElementById('errorNewImage');\n      const result = await postNewCategory(productName, image, titleColor);\n      if (result === true) {\n        history.push('/edit-category');\n      } if (result === false) {\n        errorImage.setAttribute('class', 'errorNewImage');\n      }\n    }\n\n    const {\n      productName, image, titleColor,\n      categoriesArray, errorMessage, isLoading, popupSmthWentWrongActive,\n    } = this.state;\n    const { history } = this.props;\n\n    if (!isLoading) {\n      return <div className=\"-isLoading\"> </div>;\n    }\n    if (errorMessage) {\n      return (\n        <PopUp\n          active={popupSmthWentWrongActive}\n          setActive={this.setpopupSmthWentWrongActive}\n        >\n          <PopUpSomethingWentWrong\n            text=\"Попробуйте еще раз\"\n            setpopupSmthWentWrongActive={this.setpopupSmthWentWrongActive}\n          />\n        </PopUp>\n      );\n    }\n\n    return (\n      <>\n        <Header linkItem={<button type=\"button\" className=\"buttonBack\">Назад</button>} link=\"/personal\" disabled={false} />\n        <div className=\"addProduct-box\">\n          <h2 className=\"\">Добавить товар</h2>\n          <div className=\"addProduct-container\">\n\n            <p className=\"categoryColorString\">Категория</p>\n            <select\n              className=\"productsCategories\"\n              onChange={(event) => this.setState({ titleColor: event.target.value })}\n            >\n              {categoriesArray.categories.map((category) => (\n                <option\n                  key={category.id}\n                  value={category.category}\n                >\n                  {category.category}\n                </option>\n              ))}\n            </select>\n\n            <p className=\"productNameString\">Название</p>\n            <input\n              type=\"text\"\n              className=\"productNameInput\"\n              value={productName}\n              onChange={(e) => this.setState({ productName: e.target.value })}\n            />\n\n            <p className=\"productNameString\">Цена</p>\n            <input\n              type=\"text\"\n              className=\"productNameInput\"\n              value={productName}\n              onChange={(e) => this.setState({ productName: e.target.value })}\n            />\n\n            <p className=\"categoryColorString\">В наличии</p>\n            <select\n              className=\"imageColors\"\n              onChange={(event) => this.setState({ titleColor: event.target.value })}\n            >\n              <option value defaultValue>да</option>\n              <option value={false}>нет</option>\n            </select>\n            <AddCategoryImage updateImage={this.updateImage} />\n            <button\n              className=\"addNewCategoryButton\"\n              type=\"button\"\n              onClick={() => handleButtonClick()}\n            >\n              Добавить\n            </button>\n          </div>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n\nexport default withRouter(AddCategoryPage);\n"]},"metadata":{},"sourceType":"module"}