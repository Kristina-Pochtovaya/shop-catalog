{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import serverUrl from'../../../../common/constants/urls';import transliterate from'../../../../common/untils/transliterate';var newProduct='/add-product';function postNewProduct(_x,_x2,_x3,_x4,_x5,_x6){return _postNewProduct.apply(this,arguments);}function _postNewProduct(){_postNewProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(productName,image,categoryName,productPrice,productInStock,categoriesArray){var errorImage,imgAlt,imgTitle,categoryId,price,inStock,payload,response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:errorImage=document.getElementById('errorNewImage');imgAlt=transliterate(productName);imgTitle=imgAlt;categoryId=categoriesArray.categories.filter(function(category){return category.category===categoryName;}).map(function(category){return category.id;});price='';if(productPrice.slice(-1)==='.'){price=productPrice.slice(0,-5);}inStock=productInStock==='да'?Boolean(true):Boolean(false);payload={data:{categoryId:categoryId,category:categoryName,description:productName,imgAlt:imgAlt,imgTitle:imgTitle,image:image,price:price,counter:1,inStock:inStock}};_context.prev=8;_context.next=11;return axios.post(\"\".concat(serverUrl).concat(newProduct),{payload:payload,headers:{'Content-Type':'multipart/form-data'}});case 11:response=_context.sent;result=response.data;errorImage.setAttribute('class','errorNewImage -disabled');return _context.abrupt(\"return\",result);case 17:_context.prev=17;_context.t0=_context[\"catch\"](8);errorImage.setAttribute('class','errorNewImage');return _context.abrupt(\"return\",null);case 21:case\"end\":return _context.stop();}}},_callee,null,[[8,17]]);}));return _postNewProduct.apply(this,arguments);}export default postNewProduct;","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/editProducts/api/post/postNewProduct.jsx"],"names":["axios","serverUrl","transliterate","newProduct","postNewProduct","productName","image","categoryName","productPrice","productInStock","categoriesArray","errorImage","document","getElementById","imgAlt","imgTitle","categoryId","categories","filter","category","map","id","price","slice","inStock","Boolean","payload","data","description","counter","post","headers","response","result","setAttribute"],"mappings":"iZAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,mCAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,yCAA1B,CAEA,GAAMC,CAAAA,UAAU,CAAG,cAAnB,C,QAEeC,CAAAA,c,0KAAf,iBACEC,WADF,CACeC,KADf,CACsBC,YADtB,CACoCC,YADpC,CACkDC,cADlD,CACkEC,eADlE,kMAGQC,UAHR,CAGqBC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CAHrB,CAIQC,MAJR,CAIiBZ,aAAa,CAACG,WAAD,CAJ9B,CAKQU,QALR,CAKmBD,MALnB,CAOQE,UAPR,CAOqBN,eAAe,CAACO,UAAhB,CAChBC,MADgB,CACT,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACA,QAAT,GAAsBZ,YAApC,EADS,EAEhBa,GAFgB,CAEZ,SAACD,QAAD,QAAcA,CAAAA,QAAQ,CAACE,EAAvB,EAFY,CAPrB,CAWMC,KAXN,CAWc,EAXd,CAaE,GAAId,YAAY,CAACe,KAAb,CAAmB,CAAC,CAApB,IAA2B,GAA/B,CAAoC,CAClCD,KAAK,CAAGd,YAAY,CAACe,KAAb,CAAmB,CAAnB,CAAsB,CAAC,CAAvB,CAAR,CACD,CAEKC,OAjBR,CAiBkBf,cAAc,GAAK,IAAnB,CAA0BgB,OAAO,CAAC,IAAD,CAAjC,CAA0CA,OAAO,CAAC,KAAD,CAjBnE,CAmBQC,OAnBR,CAmBkB,CACdC,IAAI,CAAE,CACJX,UAAU,CAAVA,UADI,CAEJG,QAAQ,CAAEZ,YAFN,CAGJqB,WAAW,CAAEvB,WAHT,CAIJS,MAAM,CAANA,MAJI,CAKJC,QAAQ,CAARA,QALI,CAMJT,KAAK,CAALA,KANI,CAOJgB,KAAK,CAALA,KAPI,CAQJO,OAAO,CAAE,CARL,CASJL,OAAO,CAAPA,OATI,CADQ,CAnBlB,wCAkC2BxB,CAAAA,KAAK,CAAC8B,IAAN,WAAc7B,SAAd,SAA0BE,UAA1B,EAAwC,CAC7DuB,OAAO,CAAPA,OAD6D,CAE7DK,OAAO,CAAE,CACP,eAAgB,qBADT,CAFoD,CAAxC,CAlC3B,SAkCUC,QAlCV,eAwCUC,MAxCV,CAwCmBD,QAAQ,CAACL,IAxC5B,CAyCIhB,UAAU,CAACuB,YAAX,CAAwB,OAAxB,CAAiC,yBAAjC,EAzCJ,gCA0CWD,MA1CX,4DA4CItB,UAAU,CAACuB,YAAX,CAAwB,OAAxB,CAAiC,eAAjC,EA5CJ,gCA6CW,IA7CX,uE,iDAiDA,cAAe9B,CAAAA,cAAf","sourcesContent":["import axios from 'axios';\nimport serverUrl from '../../../../common/constants/urls';\nimport transliterate from '../../../../common/untils/transliterate';\n\nconst newProduct = '/add-product';\n\nasync function postNewProduct(\n  productName, image, categoryName, productPrice, productInStock, categoriesArray,\n) {\n  const errorImage = document.getElementById('errorNewImage');\n  const imgAlt = transliterate(productName);\n  const imgTitle = imgAlt;\n\n  const categoryId = categoriesArray.categories\n    .filter((category) => category.category === categoryName)\n    .map((category) => category.id);\n\n  let price = '';\n\n  if (productPrice.slice(-1) === '.') {\n    price = productPrice.slice(0, -5);\n  }\n\n  const inStock = productInStock === 'да' ? Boolean(true) : Boolean(false);\n\n  const payload = {\n    data: {\n      categoryId,\n      category: categoryName,\n      description: productName,\n      imgAlt,\n      imgTitle,\n      image,\n      price,\n      counter: 1,\n      inStock,\n    },\n  };\n\n  try {\n    const response = await axios.post(`${serverUrl}${newProduct}`, {\n      payload,\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n    const result = response.data;\n    errorImage.setAttribute('class', 'errorNewImage -disabled');\n    return result;\n  } catch (error) {\n    errorImage.setAttribute('class', 'errorNewImage');\n    return null;\n  }\n}\n\nexport default postNewProduct;\n"]},"metadata":{},"sourceType":"module"}