{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{withRouter}from'react-router-dom';import{connect}from'react-redux';import Header from'../../main/header/components/HeaderComponent';import Footer from'../../main/footer/components/FooterComponent';import setErrorNotNull from'../../../common/untils/setErrorNotNull';import InputWitchCkeckingNotNull from'../../../common/input/components/InputWitchCkeckingNotNullComponent';import postChangePasswordRequest from'../api/post/postChangePasswordRequest';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ChangePassword=/*#__PURE__*/function(_React$Component){_inherits(ChangePassword,_React$Component);var _super=_createSuper(ChangePassword);function ChangePassword(props){var _this;_classCallCheck(this,ChangePassword);_this=_super.call(this,props);var pages=_this.props.pages;_this.state={clientEmail:pages.loginPersonalAccountReducer.clientEmail,clientEmailInput:'emailChangePasswordInput',clientEmailSymbol:'emailChangePasswordErrorSymbol',passwordNew:'',passwordNewInput:'passwordNewInput',passwordNewSymbol:'errorSymbolPasswordNew',passwordNewRepeat:'',passwordRepeatInput:'passwordNewRepeatInput',passwordRepeatSymbol:'errorSymbolPasswordNewRepeat'};_this.updateData=_this.updateData.bind(_assertThisInitialized(_this));return _this;}_createClass(ChangePassword,[{key:\"updateData\",value:function updateData(value,name){if(name==='clientEmail'){this.setState({clientEmail:value});}if(name==='passwordNew'){this.setState({passwordNew:value});}if(name==='passwordNewRepeat'){this.setState({passwordNewRepeat:value});}}},{key:\"render\",value:function render(){var _this$state=this.state,clientEmail=_this$state.clientEmail,clientEmailInput=_this$state.clientEmailInput,clientEmailSymbol=_this$state.clientEmailSymbol,passwordNew=_this$state.passwordNew,passwordNewInput=_this$state.passwordNewInput,passwordNewSymbol=_this$state.passwordNewSymbol,passwordNewRepeat=_this$state.passwordNewRepeat,passwordRepeatInput=_this$state.passwordRepeatInput,passwordRepeatSymbol=_this$state.passwordRepeatSymbol;var history=this.props.history;function handleButtonClick(){return _handleButtonClick.apply(this,arguments);}function _handleButtonClick(){_handleButtonClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userNotFound,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userNotFound=document.getElementById('notRealUser');_context.next=3;return postChangePasswordRequest(clientEmail,passwordNew,passwordNewRepeat);case 3:result=_context.sent;if(result===true){history.push('/main-page');}if(result==='incorrectUserOrPassword'){userNotFound.setAttribute('class','userNotFoundBlock');}case 6:case\"end\":return _context.stop();}}},_callee);}));return _handleButtonClick.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{linkItem:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"buttonBack\",children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"}),link:\"/main-page\",disabled:false}),/*#__PURE__*/_jsxs(\"div\",{className:\"changePassword-wrap\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\" \\u0421\\u043C\\u0435\\u043D\\u0430 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044F \"}),/*#__PURE__*/_jsxs(\"form\",{className:\"changePassword\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"notRealUser\",className:\"userNotFoundBlock -disabled\",children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F \\u0441 \\u0442\\u0430\\u043A\\u0438\\u043C email \\u043D\\u0435 \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"email\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"emailString -required\",children:\"Email:\"}),/*#__PURE__*/_jsx(InputWitchCkeckingNotNull,{initialValue:clientEmail,type:\"email\",name:\"clientEmail\",classInput:clientEmailInput,classSymbol:clientEmailSymbol,updateData:this.updateData})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"passwordNew\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"passwordNewString -required\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(InputWitchCkeckingNotNull,{initialValue:passwordNew,type:\"password\",name:\"passwordNew\",classInput:passwordNewInput,classSymbol:passwordNewSymbol,updateData:this.updateData})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"passwordNewRepeat\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"passwordNewRepeatString -required\",children:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C:\"}),/*#__PURE__*/_jsx(InputWitchCkeckingNotNull,{initialValue:passwordNewRepeat,type:\"password\",name:\"passwordNewRepeat\",classInput:passwordRepeatInput,classSymbol:passwordRepeatSymbol,updateData:this.updateData})]}),clientEmail&&passwordNew&&passwordNewRepeat&&passwordNew===passwordNewRepeat?/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"changePasswordButton\",onClick:function onClick(){return handleButtonClick();},children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"changePasswordButton\",onClick:function onClick(){if(!clientEmail){setErrorNotNull(clientEmailInput,clientEmailSymbol);}if(!passwordNew){setErrorNotNull(passwordNewInput,passwordNewSymbol);}if(passwordNew!==passwordNewRepeat){setErrorNotNull(passwordRepeatInput,passwordRepeatSymbol);}},children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]})]}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return ChangePassword;}(React.Component);var ConnectedChangePassword=connect(function(state){return{pages:state};})(ChangePassword);export default withRouter(ConnectedChangePassword);","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/changePassword/components/ChangePasswordComponent.jsx"],"names":["React","withRouter","connect","Header","Footer","setErrorNotNull","InputWitchCkeckingNotNull","postChangePasswordRequest","ChangePassword","props","pages","state","clientEmail","loginPersonalAccountReducer","clientEmailInput","clientEmailSymbol","passwordNew","passwordNewInput","passwordNewSymbol","passwordNewRepeat","passwordRepeatInput","passwordRepeatSymbol","updateData","bind","value","name","setState","history","handleButtonClick","userNotFound","document","getElementById","result","push","setAttribute","Component","ConnectedChangePassword"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Header from '../../main/header/components/HeaderComponent';\nimport Footer from '../../main/footer/components/FooterComponent';\nimport setErrorNotNull from '../../../common/untils/setErrorNotNull';\nimport InputWitchCkeckingNotNull from '../../../common/input/components/InputWitchCkeckingNotNullComponent';\nimport postChangePasswordRequest from '../api/post/postChangePasswordRequest';\n\nclass ChangePassword extends React.Component {\n  constructor(props) {\n    super(props);\n    const { pages } = this.props;\n    this.state = {\n      clientEmail: pages.loginPersonalAccountReducer.clientEmail,\n      clientEmailInput: 'emailChangePasswordInput',\n      clientEmailSymbol: 'emailChangePasswordErrorSymbol',\n      passwordNew: '',\n      passwordNewInput: 'passwordNewInput',\n      passwordNewSymbol: 'errorSymbolPasswordNew',\n      passwordNewRepeat: '',\n      passwordRepeatInput: 'passwordNewRepeatInput',\n      passwordRepeatSymbol: 'errorSymbolPasswordNewRepeat',\n    };\n    this.updateData = this.updateData.bind(this);\n  }\n\n  updateData(value, name) {\n    if (name === 'clientEmail') { this.setState({ clientEmail: value }); }\n    if (name === 'passwordNew') { this.setState({ passwordNew: value }); }\n    if (name === 'passwordNewRepeat') { this.setState({ passwordNewRepeat: value }); }\n  }\n\n  render() {\n    const {\n      clientEmail, clientEmailInput, clientEmailSymbol,\n      passwordNew, passwordNewInput, passwordNewSymbol,\n      passwordNewRepeat, passwordRepeatInput, passwordRepeatSymbol,\n    } = this.state;\n    const { history } = this.props;\n    async function handleButtonClick() {\n      const userNotFound = document.getElementById('notRealUser');\n      const result = await postChangePasswordRequest(clientEmail, passwordNew, passwordNewRepeat);\n      if (result === true) {\n        history.push('/main-page');\n      } if (result === 'incorrectUserOrPassword') {\n        userNotFound.setAttribute('class', 'userNotFoundBlock');\n      }\n    }\n    return (\n      <>\n        <Header linkItem={<button type=\"button\" className=\"buttonBack\">Главная</button>} link=\"/main-page\" disabled={false} />\n        <div className=\"changePassword-wrap\">\n          <h2> Смена пароля </h2>\n          <form className=\"changePassword\">\n            <p id=\"notRealUser\" className=\"userNotFoundBlock -disabled\">Пользователя с таким email не существует</p>\n            <div className=\"email\">\n              <p className=\"emailString -required\">Email:</p>\n              <InputWitchCkeckingNotNull\n                initialValue={clientEmail}\n                type=\"email\"\n                name=\"clientEmail\"\n                classInput={clientEmailInput}\n                classSymbol={clientEmailSymbol}\n                updateData={this.updateData}\n              />\n            </div>\n            <div className=\"passwordNew\">\n              <p className=\"passwordNewString -required\">Пароль:</p>\n              <InputWitchCkeckingNotNull\n                initialValue={passwordNew}\n                type=\"password\"\n                name=\"passwordNew\"\n                classInput={passwordNewInput}\n                classSymbol={passwordNewSymbol}\n                updateData={this.updateData}\n              />\n            </div>\n            <div className=\"passwordNewRepeat\">\n              <p className=\"passwordNewRepeatString -required\">Повторите пароль:</p>\n              <InputWitchCkeckingNotNull\n                initialValue={passwordNewRepeat}\n                type=\"password\"\n                name=\"passwordNewRepeat\"\n                classInput={passwordRepeatInput}\n                classSymbol={passwordRepeatSymbol}\n                updateData={this.updateData}\n              />\n            </div>\n            {(clientEmail && passwordNew && passwordNewRepeat)\n            && (passwordNew === passwordNewRepeat) ? (\n              <button\n                type=\"button\"\n                className=\"changePasswordButton\"\n                onClick={() => handleButtonClick()}\n              >\n                Изменить пароль\n              </button>\n              ) : (\n                <button\n                  type=\"button\"\n                  className=\"changePasswordButton\"\n                  onClick={() => {\n                    if (!clientEmail) {\n                      setErrorNotNull(clientEmailInput, clientEmailSymbol);\n                    } if (!passwordNew) {\n                      setErrorNotNull(passwordNewInput, passwordNewSymbol);\n                    } if (passwordNew !== passwordNewRepeat) {\n                      setErrorNotNull(passwordRepeatInput, passwordRepeatSymbol);\n                    }\n                  }}\n                >\n                  Изменить пароль\n                </button>\n              )}\n          </form>\n        </div>\n        <Footer />\n      </>\n    );\n  }\n}\n\nconst ConnectedChangePassword = connect(\n  (state) => ({\n    pages: state,\n  }),\n)(ChangePassword);\n\nexport default withRouter(ConnectedChangePassword);\n"]},"metadata":{},"sourceType":"module"}