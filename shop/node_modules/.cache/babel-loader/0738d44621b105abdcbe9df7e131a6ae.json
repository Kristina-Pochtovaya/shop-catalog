{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Link,withRouter}from'react-router-dom';import{connect}from'react-redux';import{ENTER,ENTEREMAIL,LOGIN}from'../../../redux/actions/loginPersonalAccountActions';import setErrorNotNull from'../../untils/setErrorNotNull';import removeErrorNotNull from'../../untils/removeErrorNotNull';import ErrorSymbol from'../../errorSymbol/components/ErrorSymbolComponent';import postLoginForgetPassword from'../../api/post/postLoginForgetPasswordRequest';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ForgetPassword=/*#__PURE__*/function(_React$Component){_inherits(ForgetPassword,_React$Component);var _super=_createSuper(ForgetPassword);function ForgetPassword(props){var _this;_classCallCheck(this,ForgetPassword);_this=_super.call(this,props);_this.state={emailInput:'emailInput',emailSymbol:'errorSymbol'};return _this;}_createClass(ForgetPassword,[{key:\"render\",value:function render(){var _this$props=this.props,onEnter=_this$props.onEnter,onLogin=_this$props.onLogin,onEnterEmail=_this$props.onEnterEmail,pages=_this$props.pages,history=_this$props.history;var _this$state=this.state,emailInput=_this$state.emailInput,emailSymbol=_this$state.emailSymbol;console.log(pages.loginPersonalAccountReducer.clientEmail);function handleButtonClick(){return _handleButtonClick.apply(this,arguments);}function _handleButtonClick(){_handleButtonClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userNotFound,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userNotFound=document.getElementById('userNotFoundChangePassword');_context.next=3;return postLoginForgetPassword(pages.loginPersonalAccountReducer.clientEmail);case 3:result=_context.sent;if(result===true){onEnter(true,false)&&onLogin(false,false,false)&&history.push('/change-password');}if(result==='incorrectUserOrPassword'){userNotFound.setAttribute('class','userNotFoundBlock');}case 6:case\"end\":return _context.stop();}}},_callee);}));return _handleButtonClick.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"form\",{className:\"form\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"userNotFoundChangePassword\",className:\"userNotFoundBlock -disabled\",children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F \\u0441 \\u0442\\u0430\\u043A\\u0438\\u043C email \\u043D\\u0435 \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"loginString -required\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{className:emailInput,type:\"email\",name:\"EMAIL\",value:pages.loginPersonalAccountReducer.clientEmail,onChange:function onChange(event){onEnterEmail(event.target.value);removeErrorNotNull(emailInput,emailSymbol);}}),/*#__PURE__*/_jsx(ErrorSymbol,{Class:\"\".concat(emailSymbol,\" -disabled\")})]}),/*#__PURE__*/_jsx(\"div\",{type:\"button\",className:\"\",children:pages.loginPersonalAccountReducer.clientEmail?/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"entranceButton\",onClick:function onClick(){handleButtonClick();},children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"}):/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"entranceButton\",onClick:function onClick(){if(!pages.loginPersonalAccountReducer.clientEmail){setErrorNotNull(emailInput,emailSymbol);}},children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"forgotPasswordButton\",onClick:function onClick(){onEnter(true,false);onLogin(true,true,false);},children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(Link,{to:\"/registration\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"registrationButton\",onClick:function onClick(){return onLogin(false,false,false);},children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})})]});}}]);return ForgetPassword;}(React.Component);var ConnectedForgetPassword=connect(function(state){return{pages:state};},function(dispatch){return{onEnter:function onEnter(loginIsVisible,personAccountIsVisible){return dispatch({type:ENTER.type,payload:{loginIsVisible:loginIsVisible,personAccountIsVisible:personAccountIsVisible}});},onLogin:function onLogin(loginFormIsVisible,loginFormLoginPageIsVisible,loginFormForgetPasswordIsVisible){return dispatch({type:LOGIN.type,payload:{loginFormIsVisible:loginFormIsVisible,loginFormLoginPageIsVisible:loginFormLoginPageIsVisible,loginFormForgetPasswordIsVisible:loginFormForgetPasswordIsVisible}});},onEnterEmail:function onEnterEmail(clientEmail){return dispatch({type:ENTEREMAIL.type,payload:{clientEmail:clientEmail}});}};})(ForgetPassword);export default withRouter(ConnectedForgetPassword);","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/common/loginForm/components/ForgetPasswordComponent.jsx"],"names":["React","Link","withRouter","connect","ENTER","ENTEREMAIL","LOGIN","setErrorNotNull","removeErrorNotNull","ErrorSymbol","postLoginForgetPassword","ForgetPassword","props","state","emailInput","emailSymbol","onEnter","onLogin","onEnterEmail","pages","history","console","log","loginPersonalAccountReducer","clientEmail","handleButtonClick","userNotFound","document","getElementById","result","push","setAttribute","event","target","value","Component","ConnectedForgetPassword","dispatch","loginIsVisible","personAccountIsVisible","type","payload","loginFormIsVisible","loginFormLoginPageIsVisible","loginFormForgetPasswordIsVisible"],"mappings":"yqCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,KAAT,CAAgBC,UAAhB,CAA4BC,KAA5B,KAAyC,oDAAzC,CACA,MAAOC,CAAAA,eAAP,KAA4B,8BAA5B,CACA,MAAOC,CAAAA,kBAAP,KAA+B,iCAA/B,CACA,MAAOC,CAAAA,WAAP,KAAwB,mDAAxB,CACA,MAAOC,CAAAA,uBAAP,KAAoC,+CAApC,C,2FAEMC,CAAAA,c,4HACJ,wBAAYC,KAAZ,CAAmB,gDACjB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACXC,UAAU,CAAE,YADD,CAEXC,WAAW,CAAE,aAFF,CAAb,CAFiB,aAMlB,C,iDAED,iBAAS,iBAGH,KAAKH,KAHF,CAELI,OAFK,aAELA,OAFK,CAEIC,OAFJ,aAEIA,OAFJ,CAEaC,YAFb,aAEaA,YAFb,CAE2BC,KAF3B,aAE2BA,KAF3B,CAEkCC,OAFlC,aAEkCA,OAFlC,iBAI6B,KAAKP,KAJlC,CAICC,UAJD,aAICA,UAJD,CAIaC,WAJb,aAIaA,WAJb,CAMPM,OAAO,CAACC,GAAR,CAAYH,KAAK,CAACI,2BAAN,CAAkCC,WAA9C,EANO,QAQQC,CAAAA,iBARR,6JAQP,2JACQC,YADR,CACuBC,QAAQ,CAACC,cAAT,CAAwB,4BAAxB,CADvB,uBAEuBlB,CAAAA,uBAAuB,CAACS,KAAK,CAACI,2BAAN,CAAkCC,WAAnC,CAF9C,QAEQK,MAFR,eAGE,GAAIA,MAAM,GAAK,IAAf,CAAqB,CACnBb,OAAO,CAAC,IAAD,CAAO,KAAP,CAAP,EAAwBC,OAAO,CAAC,KAAD,CAAQ,KAAR,CAAe,KAAf,CAA/B,EAAwDG,OAAO,CAACU,IAAR,CAAa,kBAAb,CAAxD,CACD,CAAC,GAAID,MAAM,GAAK,yBAAf,CAA0C,CAC1CH,YAAY,CAACK,YAAb,CAA0B,OAA1B,CAAmC,mBAAnC,EACD,CAPH,sDARO,oDAiBP,mBACE,cAAM,SAAS,CAAC,MAAhB,wBACE,UAAG,EAAE,CAAC,4BAAN,CAAmC,SAAS,CAAC,6BAA7C,4MADF,cAEE,aAAK,SAAS,CAAC,OAAf,wBACE,UAAG,SAAS,CAAC,uBAAb,oBADF,cAEE,cACE,SAAS,CAAEjB,UADb,CAEE,IAAI,CAAC,OAFP,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAEK,KAAK,CAACI,2BAAN,CAAkCC,WAJ3C,CAKE,QAAQ,CAAG,kBAACQ,KAAD,CAAW,CACpBd,YAAY,CAACc,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAZ,CACA1B,kBAAkB,CAACM,UAAD,CAAaC,WAAb,CAAlB,CACD,CARH,EAFF,cAYE,KAAC,WAAD,EAAa,KAAK,WAAKA,WAAL,cAAlB,EAZF,GAFF,cAgBE,YACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,EAFZ,UAIGI,KAAK,CAACI,2BAAN,CAAkCC,WAAlC,cACC,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,gBAFZ,CAGE,OAAO,CAAE,kBAAM,CACbC,iBAAiB,GAClB,CALH,oEADD,cAWC,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,gBAFZ,CAGE,OAAO,CAAE,kBAAM,CACb,GAAI,CAACN,KAAK,CAACI,2BAAN,CAAkCC,WAAvC,CAAoD,CAClDjB,eAAe,CAACO,UAAD,CAAaC,WAAb,CAAf,CACD,CACF,CAPH,oEAfJ,EAhBF,cA6CE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,sBAFZ,CAGE,OAAO,CAAE,kBAAM,CACbC,OAAO,CAAC,IAAD,CAAO,KAAP,CAAP,CACAC,OAAO,CAAC,IAAD,CAAO,IAAP,CAAa,KAAb,CAAP,CACD,CANH,4CA7CF,cAuDE,KAAC,IAAD,EAAM,EAAE,CAAC,eAAT,uBACE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,oBAFZ,CAGE,OAAO,CAAE,yBAAMA,CAAAA,OAAO,CAAC,KAAD,CAAQ,KAAR,CAAe,KAAf,CAAb,EAHX,gFADF,EAvDF,GADF,CAmED,C,4BA7F0BjB,KAAK,CAACmC,S,EAgGnC,GAAMC,CAAAA,uBAAuB,CAAGjC,OAAO,CACrC,SAACU,KAAD,QAAY,CACVM,KAAK,CAAEN,KADG,CAAZ,EADqC,CAIrC,SAACwB,QAAD,QAAe,CACbrB,OAAO,CAAE,iBAACsB,cAAD,CAAiBC,sBAAjB,QAA4CF,CAAAA,QAAQ,CAAC,CAC5DG,IAAI,CAAEpC,KAAK,CAACoC,IADgD,CAE5DC,OAAO,CAAE,CAAEH,cAAc,CAAdA,cAAF,CAAkBC,sBAAsB,CAAtBA,sBAAlB,CAFmD,CAAD,CAApD,EADI,CAKbtB,OAAO,CAAE,iBACPyB,kBADO,CACaC,2BADb,CAC0CC,gCAD1C,QAEJP,CAAAA,QAAQ,CAAC,CACZG,IAAI,CAAElC,KAAK,CAACkC,IADA,CAEZC,OAAO,CAAE,CACPC,kBAAkB,CAAlBA,kBADO,CACaC,2BAA2B,CAA3BA,2BADb,CAC0CC,gCAAgC,CAAhCA,gCAD1C,CAFG,CAAD,CAFJ,EALI,CAab1B,YAAY,CAAE,sBACZM,WADY,QAETa,CAAAA,QAAQ,CAAC,CACZG,IAAI,CAAEnC,UAAU,CAACmC,IADL,CAEZC,OAAO,CAAE,CACPjB,WAAW,CAAXA,WADO,CAFG,CAAD,CAFC,EAbD,CAAf,EAJqC,CAAP,CA0B9Bb,cA1B8B,CAAhC,CA4BA,cAAeT,CAAAA,UAAU,CAACkC,uBAAD,CAAzB","sourcesContent":["import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { ENTER, ENTEREMAIL, LOGIN } from '../../../redux/actions/loginPersonalAccountActions';\nimport setErrorNotNull from '../../untils/setErrorNotNull';\nimport removeErrorNotNull from '../../untils/removeErrorNotNull';\nimport ErrorSymbol from '../../errorSymbol/components/ErrorSymbolComponent';\nimport postLoginForgetPassword from '../../api/post/postLoginForgetPasswordRequest';\n\nclass ForgetPassword extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      emailInput: 'emailInput',\n      emailSymbol: 'errorSymbol',\n    };\n  }\n\n  render() {\n    const {\n      onEnter, onLogin, onEnterEmail, pages, history,\n    } = this.props;\n    const { emailInput, emailSymbol } = this.state;\n\n    console.log(pages.loginPersonalAccountReducer.clientEmail);\n\n    async function handleButtonClick() {\n      const userNotFound = document.getElementById('userNotFoundChangePassword');\n      const result = await postLoginForgetPassword(pages.loginPersonalAccountReducer.clientEmail);\n      if (result === true) {\n        onEnter(true, false) && onLogin(false, false, false) && history.push('/change-password');\n      } if (result === 'incorrectUserOrPassword') {\n        userNotFound.setAttribute('class', 'userNotFoundBlock');\n      }\n    }\n    return (\n      <form className=\"form\">\n        <p id=\"userNotFoundChangePassword\" className=\"userNotFoundBlock -disabled\">Пользователя с таким email не существует</p>\n        <div className=\"login\">\n          <p className=\"loginString -required\">Email:</p>\n          <input\n            className={emailInput}\n            type=\"email\"\n            name=\"EMAIL\"\n            value={pages.loginPersonalAccountReducer.clientEmail}\n            onChange={((event) => {\n              onEnterEmail(event.target.value);\n              removeErrorNotNull(emailInput, emailSymbol);\n            })}\n          />\n          <ErrorSymbol Class={`${emailSymbol} -disabled`} />\n        </div>\n        <div\n          type=\"button\"\n          className=\"\"\n        >\n          {pages.loginPersonalAccountReducer.clientEmail ? (\n            <button\n              type=\"button\"\n              className=\"entranceButton\"\n              onClick={() => {\n                handleButtonClick();\n              }}\n            >\n              Отправить\n            </button>\n          ) : (\n            <button\n              type=\"button\"\n              className=\"entranceButton\"\n              onClick={() => {\n                if (!pages.loginPersonalAccountReducer.clientEmail) {\n                  setErrorNotNull(emailInput, emailSymbol);\n                }\n              }}\n            >\n              Отправить\n            </button>\n          )}\n        </div>\n\n        <button\n          type=\"button\"\n          className=\"forgotPasswordButton\"\n          onClick={() => {\n            onEnter(true, false);\n            onLogin(true, true, false);\n          }}\n        >\n          Войти\n        </button>\n        <Link to=\"/registration\">\n          <button\n            type=\"button\"\n            className=\"registrationButton\"\n            onClick={() => onLogin(false, false, false)}\n          >\n            Регистрация\n          </button>\n        </Link>\n      </form>\n    );\n  }\n}\n\nconst ConnectedForgetPassword = connect(\n  (state) => ({\n    pages: state,\n  }),\n  (dispatch) => ({\n    onEnter: (loginIsVisible, personAccountIsVisible) => dispatch({\n      type: ENTER.type,\n      payload: { loginIsVisible, personAccountIsVisible },\n    }),\n    onLogin: (\n      loginFormIsVisible, loginFormLoginPageIsVisible, loginFormForgetPasswordIsVisible,\n    ) => dispatch({\n      type: LOGIN.type,\n      payload: {\n        loginFormIsVisible, loginFormLoginPageIsVisible, loginFormForgetPasswordIsVisible,\n      },\n    }),\n    onEnterEmail: (\n      clientEmail,\n    ) => dispatch({\n      type: ENTEREMAIL.type,\n      payload: {\n        clientEmail,\n      },\n    }),\n  }),\n)(ForgetPassword);\n\nexport default withRouter(ConnectedForgetPassword);\n"]},"metadata":{},"sourceType":"module"}