{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import serverUrl from'../../../../common/constants/urls';import transliterate from'../../../../common/untils/transliterate';var newProduct='/add-product';function postNewProduct(_x){return _postNewProduct.apply(this,arguments);}function _postNewProduct(){_postNewProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(state){var errorImage,imgAlt,imgTitle,newCategory,categoryId,price,inStock,payload,response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:errorImage=document.getElementById('errorNewImage');imgAlt=transliterate(state.productName);imgTitle=imgAlt;newCategory=state.categoryName==='Электротовары и свет'?state.categoriesArray.categories[0].category:state.categoryName;categoryId=state.categoriesArray.categories.filter(function(category){return category.category===newCategory;}).map(function(category){return category.id;}).join('');categoryId=Number(categoryId);price='';if(state.productPrice.slice(-1)==='.'){price=state.productPrice.slice(0,-5);}inStock=state.productInStock==='да'?Boolean(true):Boolean(false);payload={data:{categoryId:categoryId,category:newCategory,description:state.productName,imgAlt:imgAlt,imgTitle:imgTitle,image:state.image,price:price,counter:1,inStock:inStock}};_context.prev=10;_context.next=13;return axios.post(\"\".concat(serverUrl).concat(newProduct),{payload:payload,headers:{'Content-Type':'multipart/form-data'}});case 13:response=_context.sent;result=response.data;errorImage.setAttribute('class','errorNewImage -disabled');return _context.abrupt(\"return\",result);case 19:_context.prev=19;_context.t0=_context[\"catch\"](10);errorImage.setAttribute('class','errorNewImage');return _context.abrupt(\"return\",null);case 23:case\"end\":return _context.stop();}}},_callee,null,[[10,19]]);}));return _postNewProduct.apply(this,arguments);}export default postNewProduct;","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/editProducts/api/post/postNewProduct.jsx"],"names":["axios","serverUrl","transliterate","newProduct","postNewProduct","state","errorImage","document","getElementById","imgAlt","productName","imgTitle","newCategory","categoryName","categoriesArray","categories","category","categoryId","filter","map","id","join","Number","price","productPrice","slice","inStock","productInStock","Boolean","payload","data","description","image","counter","post","headers","response","result","setAttribute"],"mappings":"iZAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,mCAAtB,CACA,MAAOC,CAAAA,aAAP,KAA0B,yCAA1B,CAEA,GAAMC,CAAAA,UAAU,CAAG,cAAnB,C,QAEeC,CAAAA,c,sJAAf,iBAA8BC,KAA9B,8MACQC,UADR,CACqBC,QAAQ,CAACC,cAAT,CAAwB,eAAxB,CADrB,CAEQC,MAFR,CAEiBP,aAAa,CAACG,KAAK,CAACK,WAAP,CAF9B,CAGQC,QAHR,CAGmBF,MAHnB,CAKQG,WALR,CAKsBP,KAAK,CAACQ,YAAN,GAAuB,sBAAvB,CAAgDR,KAAK,CAACS,eAAN,CAAsBC,UAAtB,CAAiC,CAAjC,EAAoCC,QAApF,CAA+FX,KAAK,CAACQ,YAL3H,CAOMI,UAPN,CAOmBZ,KAAK,CAACS,eAAN,CAAsBC,UAAtB,CACdG,MADc,CACP,SAACF,QAAD,QAAcA,CAAAA,QAAQ,CAACA,QAAT,GAAsBJ,WAApC,EADO,EAEdO,GAFc,CAEV,SAACH,QAAD,QAAcA,CAAAA,QAAQ,CAACI,EAAvB,EAFU,EAEiBC,IAFjB,CAEsB,EAFtB,CAPnB,CAWEJ,UAAU,CAAGK,MAAM,CAACL,UAAD,CAAnB,CAEIM,KAbN,CAac,EAbd,CAeE,GAAIlB,KAAK,CAACmB,YAAN,CAAmBC,KAAnB,CAAyB,CAAC,CAA1B,IAAiC,GAArC,CAA0C,CACxCF,KAAK,CAAGlB,KAAK,CAACmB,YAAN,CAAmBC,KAAnB,CAAyB,CAAzB,CAA4B,CAAC,CAA7B,CAAR,CACD,CAEKC,OAnBR,CAmBkBrB,KAAK,CAACsB,cAAN,GAAyB,IAAzB,CAAgCC,OAAO,CAAC,IAAD,CAAvC,CAAgDA,OAAO,CAAC,KAAD,CAnBzE,CAqBQC,OArBR,CAqBkB,CACdC,IAAI,CAAE,CACJb,UAAU,CAAVA,UADI,CAEJD,QAAQ,CAAEJ,WAFN,CAGJmB,WAAW,CAAE1B,KAAK,CAACK,WAHf,CAIJD,MAAM,CAANA,MAJI,CAKJE,QAAQ,CAARA,QALI,CAMJqB,KAAK,CAAE3B,KAAK,CAAC2B,KANT,CAOJT,KAAK,CAALA,KAPI,CAQJU,OAAO,CAAE,CARL,CASJP,OAAO,CAAPA,OATI,CADQ,CArBlB,yCAoC2B1B,CAAAA,KAAK,CAACkC,IAAN,WAAcjC,SAAd,SAA0BE,UAA1B,EAAwC,CAC7D0B,OAAO,CAAPA,OAD6D,CAE7DM,OAAO,CAAE,CACP,eAAgB,qBADT,CAFoD,CAAxC,CApC3B,SAoCUC,QApCV,eA0CUC,MA1CV,CA0CmBD,QAAQ,CAACN,IA1C5B,CA2CIxB,UAAU,CAACgC,YAAX,CAAwB,OAAxB,CAAiC,yBAAjC,EA3CJ,gCA4CWD,MA5CX,6DA8CI/B,UAAU,CAACgC,YAAX,CAAwB,OAAxB,CAAiC,eAAjC,EA9CJ,gCA+CW,IA/CX,wE,iDAmDA,cAAelC,CAAAA,cAAf","sourcesContent":["import axios from 'axios';\nimport serverUrl from '../../../../common/constants/urls';\nimport transliterate from '../../../../common/untils/transliterate';\n\nconst newProduct = '/add-product';\n\nasync function postNewProduct(state) {\n  const errorImage = document.getElementById('errorNewImage');\n  const imgAlt = transliterate(state.productName);\n  const imgTitle = imgAlt;\n\n  const newCategory = state.categoryName === 'Электротовары и свет' ? state.categoriesArray.categories[0].category : state.categoryName;\n\n  let categoryId = state.categoriesArray.categories\n    .filter((category) => category.category === newCategory)\n    .map((category) => category.id).join('');\n\n  categoryId = Number(categoryId);\n\n  let price = '';\n\n  if (state.productPrice.slice(-1) === '.') {\n    price = state.productPrice.slice(0, -5);\n  }\n\n  const inStock = state.productInStock === 'да' ? Boolean(true) : Boolean(false);\n\n  const payload = {\n    data: {\n      categoryId,\n      category: newCategory,\n      description: state.productName,\n      imgAlt,\n      imgTitle,\n      image: state.image,\n      price,\n      counter: 1,\n      inStock,\n    },\n  };\n\n  try {\n    const response = await axios.post(`${serverUrl}${newProduct}`, {\n      payload,\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n    const result = response.data;\n    errorImage.setAttribute('class', 'errorNewImage -disabled');\n    return result;\n  } catch (error) {\n    errorImage.setAttribute('class', 'errorNewImage');\n    return null;\n  }\n}\n\nexport default postNewProduct;\n"]},"metadata":{},"sourceType":"module"}