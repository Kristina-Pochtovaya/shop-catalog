{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import getCategories from'../api/get/getCategories';import NameColumnEditCategory from'./NameColumnEditCategoryComponent';import PopUpErrorEditCategory from'./PopUpErrorEditCategoryComponent';import ImageColumnEditCategory from'./ImageColumnEditCategoryComponent';import postCategory from'../api/post/postCategory';import ButtonEditCategory from'../../../common/button/components/ButtonEditCategoryComponent';import ButtonDeleteCategory from'../../../common/button/components/ButtonDeleteCategoryComponent';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditCategoryPageColumns=/*#__PURE__*/function(_React$Component){_inherits(EditCategoryPageColumns,_React$Component);var _super=_createSuper(EditCategoryPageColumns);function EditCategoryPageColumns(props){var _this;_classCallCheck(this,EditCategoryPageColumns);_this=_super.call(this,props);_this._isMounted=false;_this.handleButtonOnSave=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(category){var _this$state,isEditActiveId,isUpdated,categoryImage,categoryName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,isEditActiveId=_this$state.isEditActiveId,isUpdated=_this$state.isUpdated,categoryImage=_this$state.categoryImage,categoryName=_this$state.categoryName;_context.next=3;return postCategory(isEditActiveId,categoryName,categoryImage);case 3:_this.setState({isUpdated:!isUpdated,isEditActive:false,isEditActiveId:category.id,IsEditButtonVisible:false});case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleButtonOnEdit=function(category){_this.setState({isEditActive:true,isEditActiveId:category.id,IsEditButtonVisible:true,categoryImage:category.image,categoryName:category.category});};_this.setpopupSmthWentWrongActive=function(value){_this.setState({popupSmthWentWrongActive:value});};_this.updateData=function(value,valueisLoading){if(_this._isMounted){_this.setState({categoriesArray:value,isLoading:valueisLoading});}};_this.updateIsUpdate=function(isUpdated){return _this.setState({isUpdated:!isUpdated});};_this.updateCategoryImage=function(value){return _this.setState({categoryImage:value});};_this.updateCategoryName=function(value){return _this.setState({categoryName:value});};_this.updateAfterDelete=function(){var isUpdated=_this.state.isUpdated;_this.setState({isUpdated:!isUpdated});};_this.state={categoriesArray:[],isEditActive:false,isEditActiveId:'',isLoading:false,ErrorMessage:'',popupSmthWentWrongActive:true,IsEditButtonVisible:true,isUpdated:false,categoryImage:'',categoryName:''};return _this;}_createClass(EditCategoryPageColumns,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this._isMounted=true;_context2.next=3;return getCategories(this.updateData);case 3:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var isUpdated=this.state.isUpdated;if(prevState.isUpdated!==isUpdated){this._isMounted=true;getCategories(this.updateData);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._isMounted=false;}},{key:\"render\",value:function render(){var _this2=this;var isUpdated=this.state.isUpdated;var _this$state2=this.state,categoriesArray=_this$state2.categoriesArray,isEditActive=_this$state2.isEditActive,isEditActiveId=_this$state2.isEditActiveId,isLoading=_this$state2.isLoading,ErrorMessage=_this$state2.ErrorMessage,popupSmthWentWrongActive=_this$state2.popupSmthWentWrongActive,IsEditButtonVisible=_this$state2.IsEditButtonVisible;if(!isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"-isLoading\",children:\" \"});}if(ErrorMessage){return/*#__PURE__*/_jsx(PopUpErrorEditCategory,{popupSmthWentWrongActive:popupSmthWentWrongActive,setpopupSmthWentWrongActive:this.setpopupSmthWentWrongActive});}return/*#__PURE__*/_jsx(_Fragment,{children:categoriesArray.categories.map(function(category){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"columns\",children:[/*#__PURE__*/_jsx(ImageColumnEditCategory,{isEditActive:isEditActive,id:category.id,image:category.image,imgAlt:category.imgAlt,isEditActiveId:isEditActiveId,updateCategoryImage:_this2.updateCategoryImage,isUpdated:isUpdated,updateData:_this2.updateData}),/*#__PURE__*/_jsx(NameColumnEditCategory,{isEditActive:isEditActive,category:category,isEditActiveId:isEditActiveId,updateCategoryName:_this2.updateCategoryName}),/*#__PURE__*/_jsx(\"div\",{className:\"columnEdit\",children:/*#__PURE__*/_jsx(ButtonEditCategory,{className:\"editCategoryButton\",category:category,handleButtonOnDelete:\"\",handleButtonOnSave:_this2.handleButtonOnSave,handleButtonOnEdit:_this2.handleButtonOnEdit,updateIsUpdate:_this2.updateIsUpdate,isUpdated:isUpdated,IsEditButtonVisible:IsEditButtonVisible,isEditActive:isEditActive,isEditActiveId:isEditActiveId})}),/*#__PURE__*/_jsx(\"div\",{className:\"columnDelete\",children:/*#__PURE__*/_jsx(ButtonDeleteCategory,{category:category,updateAfterDelete:_this2.updateAfterDelete})})]})},category.id);})});}}]);return EditCategoryPageColumns;}(React.Component);export default EditCategoryPageColumns;","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/editCategory/components/EditCategoryPageColumnsComponent.jsx"],"names":["React","getCategories","NameColumnEditCategory","PopUpErrorEditCategory","ImageColumnEditCategory","postCategory","ButtonEditCategory","ButtonDeleteCategory","EditCategoryPageColumns","props","_isMounted","handleButtonOnSave","category","state","isEditActiveId","isUpdated","categoryImage","categoryName","setState","isEditActive","id","IsEditButtonVisible","handleButtonOnEdit","image","setpopupSmthWentWrongActive","value","popupSmthWentWrongActive","updateData","valueisLoading","categoriesArray","isLoading","updateIsUpdate","updateCategoryImage","updateCategoryName","updateAfterDelete","ErrorMessage","prevProps","prevState","categories","map","imgAlt","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport getCategories from '../api/get/getCategories';\nimport NameColumnEditCategory from './NameColumnEditCategoryComponent';\nimport PopUpErrorEditCategory from './PopUpErrorEditCategoryComponent';\nimport ImageColumnEditCategory from './ImageColumnEditCategoryComponent';\nimport postCategory from '../api/post/postCategory';\nimport ButtonEditCategory from '../../../common/button/components/ButtonEditCategoryComponent';\nimport ButtonDeleteCategory from '../../../common/button/components/ButtonDeleteCategoryComponent';\n\nclass EditCategoryPageColumns extends React.Component {\n  _isMounted = false;\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      categoriesArray: [],\n      isEditActive: false,\n      isEditActiveId: '',\n      isLoading: false,\n      ErrorMessage: '',\n      popupSmthWentWrongActive: true,\n      IsEditButtonVisible: true,\n      isUpdated: false,\n      categoryImage: '',\n      categoryName: '',\n    };\n  }\n\n  async componentDidMount() {\n    this._isMounted = true;\n    await getCategories(this.updateData);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { isUpdated } = this.state;\n    if (prevState.isUpdated !== isUpdated) {\n      this._isMounted = true;\n      getCategories(this.updateData);\n    }\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n   handleButtonOnSave = async (category) => {\n     const {\n       isEditActiveId, isUpdated, categoryImage, categoryName,\n     } = this.state;\n     await postCategory(isEditActiveId, categoryName, categoryImage);\n     this.setState({\n       isUpdated: !isUpdated,\n       isEditActive: false,\n       isEditActiveId: category.id,\n       IsEditButtonVisible: false,\n     });\n   }\n\n   handleButtonOnEdit = (category) => {\n     this.setState({\n       isEditActive: true,\n       isEditActiveId: category.id,\n       IsEditButtonVisible: true,\n       categoryImage: category.image,\n       categoryName: category.category,\n     });\n   };\n\n  setpopupSmthWentWrongActive = (value) => { this.setState({ popupSmthWentWrongActive: value }); }\n\n  updateData = (value, valueisLoading) => {\n    if (this._isMounted) {\n      this.setState({ categoriesArray: value, isLoading: valueisLoading });\n    }\n  }\n\n  updateIsUpdate = (isUpdated) => this.setState({ isUpdated: !isUpdated });\n\n  updateCategoryImage = (value) => this.setState({ categoryImage: value })\n\n  updateCategoryName = (value) => this.setState({ categoryName: value })\n\n  updateAfterDelete = () => {\n    const { isUpdated } = this.state;\n    this.setState({ isUpdated: !isUpdated });\n  }\n\n  render() {\n    const { isUpdated } = this.state;\n    const {\n      categoriesArray, isEditActive, isEditActiveId, isLoading,\n      ErrorMessage, popupSmthWentWrongActive, IsEditButtonVisible,\n    } = this.state;\n\n    if (!isLoading) {\n      return <div className=\"-isLoading\"> </div>;\n    }\n    if (ErrorMessage) {\n      return (\n        <PopUpErrorEditCategory\n          popupSmthWentWrongActive={popupSmthWentWrongActive}\n          setpopupSmthWentWrongActive={this.setpopupSmthWentWrongActive}\n        />\n      );\n    }\n    return (\n      <>\n        {categoriesArray.categories.map((category) => (\n          <li key={category.id}>\n            <div className=\"columns\">\n              <ImageColumnEditCategory\n                isEditActive={isEditActive}\n                id={category.id}\n                image={category.image}\n                imgAlt={category.imgAlt}\n                isEditActiveId={isEditActiveId}\n                updateCategoryImage={this.updateCategoryImage}\n                isUpdated={isUpdated}\n                updateData={this.updateData}\n              />\n              <NameColumnEditCategory\n                isEditActive={isEditActive}\n                category={category}\n                isEditActiveId={isEditActiveId}\n                updateCategoryName={this.updateCategoryName}\n              />\n              <div className=\"columnEdit\">\n                <ButtonEditCategory\n                  className=\"editCategoryButton\"\n                  category={category}\n                  handleButtonOnDelete=\"\"\n                  handleButtonOnSave={this.handleButtonOnSave}\n                  handleButtonOnEdit={this.handleButtonOnEdit}\n                  updateIsUpdate={this.updateIsUpdate}\n                  isUpdated={isUpdated}\n                  IsEditButtonVisible={IsEditButtonVisible}\n                  isEditActive={isEditActive}\n                  isEditActiveId={isEditActiveId}\n                />\n              </div>\n              <div className=\"columnDelete\">\n                <ButtonDeleteCategory\n                  category={category}\n                  updateAfterDelete={this.updateAfterDelete}\n                />\n              </div>\n            </div>\n          </li>\n        ))}\n      </>\n    );\n  }\n}\n\nexport default EditCategoryPageColumns;\n"]},"metadata":{},"sourceType":"module"}