{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import personalAccount from'../../../assets/personal-account/personal-account.jpg';import{ADDPHOTO}from'../../../redux/actions/loginPersonalAccountActions';import postUserPhoto from'../api/post/postUserPhotoRequest';import getUserPhoto from'../api/get/getUserPhotoRequest';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageUpload=/*#__PURE__*/function(_React$Component){_inherits(ImageUpload,_React$Component);var _super=_createSuper(ImageUpload);function ImageUpload(props){var _this;_classCallCheck(this,ImageUpload);_this=_super.call(this,props);_this.updateData=function(value){_this.setState({imagePreviewUrl:value});};_this.state={imagePreviewUrl:''};return _this;}_createClass(ImageUpload,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var pages;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:pages=this.props.pages;_context.next=3;return getUserPhoto(pages.loginPersonalAccountReducer.clientEmail,this.updateData);case 3:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"handleSubmit\",value:function handleSubmit(e){this.e.preventDefault();}},{key:\"handleImageChange\",value:function handleImageChange(e){var _this2=this;var pages=this.props.pages;e.preventDefault();var reader=new FileReader();var file=e.target.files[0];if(file){reader.onloadend=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this2.setState({imagePreviewUrl:reader.result});_context2.next=3;return postUserPhoto(pages.loginPersonalAccountReducer.clientEmail,reader.result);case 3:case\"end\":return _context2.stop();}}},_callee2);}));reader.readAsDataURL(file);}}},{key:\"render\",value:function render(){var _this3=this;var imagePreviewUrl=this.state.imagePreviewUrl;var pages=this.props.pages;var $imagePreview=null;if(imagePreviewUrl){$imagePreview=/*#__PURE__*/_jsx(\"img\",{src:imagePreviewUrl,className:\"photoPersonalAccount\",title:\"photoPersonalAccount\",alt:\"photoPersonalAccount\"});}else{$imagePreview=/*#__PURE__*/_jsx(\"img\",{src:personalAccount,title:\"photoPersonalAccount\",alt:\"photoPersonalAccount\",className:\"photoPersonalAccount\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"previewComponent\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"errorPhoto -disabled\",id:\"errorPhoto\",children:\"\\u0420\\u0430\\u0437\\u043C\\u0435\\u0440 \\u0444\\u043E\\u0442\\u043E \\u0441\\u043B\\u0438\\u0448\\u043A\\u043E\\u043C \\u0431\\u043E\\u043B\\u044C\\u0448\\u043E\\u0439\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return _this3.handleSubmit(e);},id:\"upload-container\",children:[$imagePreview,/*#__PURE__*/_jsx(\"div\",{className:\"imgPreview\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"avatar\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"choosePhotoButton\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0444\\u043E\\u0442\\u043E\"}),/*#__PURE__*/_jsx(\"input\",{id:\"avatar\",name:\"avatar\",className:\"avatar\",type:\"file\",onChange:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this3.handleImageChange(e);_context3.next=3;return postUserPhoto(pages.loginPersonalAccountReducer.clientEmail,imagePreviewUrl);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref2.apply(this,arguments);};}(),multiple:true})]})})]})]});}}]);return ImageUpload;}(React.Component);var ConnectedImageUpload=connect(function(state){return{pages:state};},function(dispatch){return{onAddPhoto:function onAddPhoto(photo){return dispatch({type:ADDPHOTO.type,payload:{photo:photo}});}};})(ImageUpload);export default ConnectedImageUpload;","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/personalAccount/components/PhotoComponent.jsx"],"names":["React","connect","personalAccount","ADDPHOTO","postUserPhoto","getUserPhoto","ImageUpload","props","updateData","value","setState","imagePreviewUrl","state","pages","loginPersonalAccountReducer","clientEmail","e","preventDefault","reader","FileReader","file","target","files","onloadend","result","readAsDataURL","$imagePreview","handleSubmit","handleImageChange","Component","ConnectedImageUpload","dispatch","onAddPhoto","photo","type","payload"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport personalAccount from '../../../assets/personal-account/personal-account.jpg';\nimport { ADDPHOTO } from '../../../redux/actions/loginPersonalAccountActions';\nimport postUserPhoto from '../api/post/postUserPhotoRequest';\nimport getUserPhoto from '../api/get/getUserPhotoRequest';\n\nclass ImageUpload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      imagePreviewUrl: '',\n    };\n  }\n\n  async componentDidMount() {\n    const { pages } = this.props;\n    await getUserPhoto(pages.loginPersonalAccountReducer.clientEmail,\n      this.updateData);\n  }\n\n  handleSubmit(e) {\n    this.e.preventDefault();\n  }\n\n  handleImageChange(e) {\n    const { pages } = this.props;\n    e.preventDefault();\n\n    const reader = new FileReader();\n    const file = e.target.files[0];\n\n    if (file) {\n      reader.onloadend = async () => {\n        this.setState({\n          imagePreviewUrl: reader.result,\n        });\n        await postUserPhoto(\n          pages.loginPersonalAccountReducer.clientEmail,\n          reader.result,\n        );\n      };\n\n      reader.readAsDataURL(file);\n    }\n  }\n\n  updateData = (value) => { this.setState({ imagePreviewUrl: value }); }\n\n  render() {\n    const { imagePreviewUrl } = this.state;\n    const { pages } = this.props;\n    let $imagePreview = null;\n\n    if (imagePreviewUrl) {\n      $imagePreview = (\n        <img\n          src={imagePreviewUrl}\n          className=\"photoPersonalAccount\"\n          title=\"photoPersonalAccount\"\n          alt=\"photoPersonalAccount\"\n        />\n      );\n    } else {\n      $imagePreview = (\n        <img\n          src={personalAccount}\n          title=\"photoPersonalAccount\"\n          alt=\"photoPersonalAccount\"\n          className=\"photoPersonalAccount\"\n        />\n      );\n    }\n    return (\n      <div className=\"previewComponent\">\n        <p className=\"errorPhoto -disabled\" id=\"errorPhoto\">Размер фото слишком большой</p>\n        <form onSubmit={(e) => this.handleSubmit(e)} id=\"upload-container\">\n          {$imagePreview}\n          <div className=\"imgPreview\">\n            <label htmlFor=\"avatar\">\n              <p\n                className=\"choosePhotoButton\"\n              >\n                Выберите фото\n              </p>\n              <input\n                id=\"avatar\"\n                name=\"avatar\"\n                className=\"avatar\"\n                type=\"file\"\n                onChange={async (e) => {\n                  this.handleImageChange(e);\n                  await postUserPhoto(\n                    pages.loginPersonalAccountReducer.clientEmail, imagePreviewUrl,\n                  );\n                }}\n                multiple\n              />\n            </label>\n          </div>\n        </form>\n      </div>\n    );\n  }\n}\n\nconst ConnectedImageUpload = connect(\n  (state) => ({\n    pages: state,\n  }),\n  (dispatch) => ({\n    onAddPhoto: (photo) => dispatch({\n      type: ADDPHOTO.type,\n      payload: { photo },\n    }),\n  }),\n)(ImageUpload);\n\nexport default ConnectedImageUpload;\n"]},"metadata":{},"sourceType":"module"}