{"ast":null,"code":"import _regeneratorRuntime from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import PopUp from'../../../common/popup/components/PopUpComponent';import PopUpSomethingWentWrong from'../../../common/popup/components/PopUpSomethingWentWrongComponent';import postProductsCategory from'../api/post/postProductsCategory';import getCategories from'../../editCategory/api/get/getCategories';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var InputEditProductsCategory=/*#__PURE__*/function(_React$Component){_inherits(InputEditProductsCategory,_React$Component);var _super=_createSuper(InputEditProductsCategory);function InputEditProductsCategory(props){var _this;_classCallCheck(this,InputEditProductsCategory);_this=_super.call(this,props);var _this$props=_this.props,category=_this$props.category,id=_this$props.id;_this.state={id:id,categoryName:category,categoriesArray:[],errorMessage:'',isLoading:false,popupSmthWentWrongActive:true};_this.setError=_this.setError.bind(_assertThisInitialized(_this));_this.updateDataCategories=_this.updateDataCategories.bind(_assertThisInitialized(_this));_this.setpopupSmthWentWrongActive=_this.setpopupSmthWentWrongActive.bind(_assertThisInitialized(_this));return _this;}_createClass(InputEditProductsCategory,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getCategories(_this2.updateDataCategories,_this2.setError);case 2:case\"end\":return _context.stop();}}},_callee);})),10);}},{key:\"handleCategoryProductsChange\",value:function(){var _handleCategoryProductsChange=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var _this$state,id,categoriesArray;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state=this.state,id=_this$state.id,categoriesArray=_this$state.categoriesArray;e.preventDefault();this.setState({categoryName:e.target.value});postProductsCategory(id,e.target.value,categoriesArray.categories);case 4:case\"end\":return _context2.stop();}}},_callee2,this);}));function handleCategoryProductsChange(_x){return _handleCategoryProductsChange.apply(this,arguments);}return handleCategoryProductsChange;}()},{key:\"setError\",value:function setError(value){this.setState({errorMessage:value});}},{key:\"setpopupSmthWentWrongActive\",value:function setpopupSmthWentWrongActive(value){this.setState({popupSmthWentWrongActive:value});}},{key:\"updateDataCategories\",value:function updateDataCategories(value,valueIsLoading){this.setState({categoriesArray:value,isLoading:valueIsLoading});}},{key:\"render\",value:function render(){var _this3=this;var _this$state2=this.state,categoriesArray=_this$state2.categoriesArray,errorMessage=_this$state2.errorMessage,isLoading=_this$state2.isLoading,popupSmthWentWrongActive=_this$state2.popupSmthWentWrongActive,categoryName=_this$state2.categoryName;var _this$props2=this.props,isProductsUpdated=_this$props2.isProductsUpdated,setIsProductsUpdated=_this$props2.setIsProductsUpdated;if(!isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"-isLoading\",children:\" \"});}if(errorMessage){return/*#__PURE__*/_jsx(PopUp,{active:popupSmthWentWrongActive,setActive:this.setpopupSmthWentWrongActive,children:/*#__PURE__*/_jsx(PopUpSomethingWentWrong,{text:\"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0435\\u0449\\u0435 \\u0440\\u0430\\u0437\",setpopupSmthWentWrongActive:this.setpopupSmthWentWrongActive})});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"select\",{className:\"productsCategory\",value:categoryName,onChange:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this3.handleCategoryProductsChange(e);isProductsUpdated?setIsProductsUpdated(false):setIsProductsUpdated(true);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x2){return _ref2.apply(this,arguments);};}(),onBlur:function onBlur(){return isProductsUpdated?setIsProductsUpdated(false):setIsProductsUpdated(true);},children:categoriesArray.categories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{value:category.category,children:category.category},category.id);})})});}}]);return InputEditProductsCategory;}(React.Component);export default InputEditProductsCategory;","map":{"version":3,"sources":["/home/ITRANSITION.CORP/k.pochtovaya/Documents/React Projects/shop catalog/shop/shop/src/pages/editProducts/components/InputEditProductsCategoryComponent.jsx"],"names":["React","PopUp","PopUpSomethingWentWrong","postProductsCategory","getCategories","InputEditProductsCategory","props","category","id","state","categoryName","categoriesArray","errorMessage","isLoading","popupSmthWentWrongActive","setError","bind","updateDataCategories","setpopupSmthWentWrongActive","interval","setTimeout","e","preventDefault","setState","target","value","categories","valueIsLoading","isProductsUpdated","setIsProductsUpdated","handleCategoryProductsChange","map","Component"],"mappings":"m4CAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,iDAAlB,CACA,MAAOC,CAAAA,uBAAP,KAAoC,mEAApC,CACA,MAAOC,CAAAA,oBAAP,KAAiC,kCAAjC,CACA,MAAOC,CAAAA,aAAP,KAA0B,0CAA1B,C,mGAEMC,CAAAA,yB,kJACJ,mCAAYC,KAAZ,CAAmB,2DACjB,uBAAMA,KAAN,EADiB,gBAEQ,MAAKA,KAFb,CAETC,QAFS,aAETA,QAFS,CAECC,EAFD,aAECA,EAFD,CAGjB,MAAKC,KAAL,CAAa,CACXD,EAAE,CAAFA,EADW,CAEXE,YAAY,CAAEH,QAFH,CAGXI,eAAe,CAAE,EAHN,CAIXC,YAAY,CAAE,EAJH,CAKXC,SAAS,CAAE,KALA,CAMXC,wBAAwB,CAAE,IANf,CAAb,CAQA,MAAKC,QAAL,CAAgB,MAAKA,QAAL,CAAcC,IAAd,+BAAhB,CACA,MAAKC,oBAAL,CAA4B,MAAKA,oBAAL,CAA0BD,IAA1B,+BAA5B,CACA,MAAKE,2BAAL,CAAmC,MAAKA,2BAAL,CAAiCF,IAAjC,+BAAnC,CAbiB,aAclB,C,uEAED,4BAAoB,iBAClB,KAAKG,QAAL,CAAgBC,UAAU,sEAAC,yJACnBhB,CAAAA,aAAa,CAAC,MAAI,CAACa,oBAAN,CAA4B,MAAI,CAACF,QAAjC,CADM,uDAAD,GAEvB,EAFuB,CAA1B,CAGD,C,iJAED,kBAAmCM,CAAnC,qKACkC,KAAKZ,KADvC,CACUD,EADV,aACUA,EADV,CACcG,eADd,aACcA,eADd,CAEEU,CAAC,CAACC,cAAF,GAEA,KAAKC,QAAL,CAAc,CACZb,YAAY,CAAEW,CAAC,CAACG,MAAF,CAASC,KADX,CAAd,EAIAtB,oBAAoB,CAACK,EAAD,CAAKa,CAAC,CAACG,MAAF,CAASC,KAAd,CAClBd,eAAe,CAACe,UADE,CAApB,CARF,6D,wKAYA,kBAASD,KAAT,CAAgB,CACd,KAAKF,QAAL,CAAc,CACZX,YAAY,CAAEa,KADF,CAAd,EAGD,C,2CAED,qCAA4BA,KAA5B,CAAmC,CACjC,KAAKF,QAAL,CAAc,CACZT,wBAAwB,CAAEW,KADd,CAAd,EAGD,C,oCAED,8BAAqBA,KAArB,CAA4BE,cAA5B,CAA4C,CAC1C,KAAKJ,QAAL,CAAc,CACZZ,eAAe,CAAEc,KADL,CAEZZ,SAAS,CAAEc,cAFC,CAAd,EAID,C,sBAED,iBAAS,kCAIH,KAAKlB,KAJF,CAELE,eAFK,cAELA,eAFK,CAEYC,YAFZ,cAEYA,YAFZ,CAGLC,SAHK,cAGLA,SAHK,CAGMC,wBAHN,cAGMA,wBAHN,CAGgCJ,YAHhC,cAGgCA,YAHhC,kBAK6C,KAAKJ,KALlD,CAKCsB,iBALD,cAKCA,iBALD,CAKoBC,oBALpB,cAKoBA,oBALpB,CAOP,GAAI,CAAChB,SAAL,CAAgB,CACd,mBAAO,YAAK,SAAS,CAAC,YAAf,eAAP,CACD,CACD,GAAID,YAAJ,CAAkB,CAChB,mBACE,KAAC,KAAD,EACE,MAAM,CAAEE,wBADV,CAEE,SAAS,CAAE,KAAKI,2BAFlB,uBAIE,KAAC,uBAAD,EACE,IAAI,CAAC,oGADP,CAEE,2BAA2B,CAAE,KAAKA,2BAFpC,EAJF,EADF,CAWD,CAED,mBACE,sCACE,eACE,SAAS,CAAC,kBADZ,CAEE,KAAK,CAAER,YAFT,CAGE,QAAQ,2FAAE,kBAAOW,CAAP,sHACR,MAAI,CAACS,4BAAL,CAAkCT,CAAlC,EACCO,iBAAiB,CACdC,oBAAoB,CAAC,KAAD,CADN,CAEdA,oBAAoB,CAAC,IAAD,CAFxB,CAFQ,wDAAF,gEAHV,CASE,MAAM,CAAE,wBAAOD,CAAAA,iBAAiB,CAC5BC,oBAAoB,CAAC,KAAD,CADQ,CAE5BA,oBAAoB,CAAC,IAAD,CAFhB,EATV,UAaGlB,eAAe,CAACe,UAAhB,CAA2BK,GAA3B,CAA+B,SAACxB,QAAD,qBAC9B,eAEE,KAAK,CAAEA,QAAQ,CAACA,QAFlB,UAIGA,QAAQ,CAACA,QAJZ,EACOA,QAAQ,CAACC,EADhB,CAD8B,EAA/B,CAbH,EADF,EADF,CA2BD,C,uCAzGqCR,KAAK,CAACgC,S,EA4G9C,cAAe3B,CAAAA,yBAAf","sourcesContent":["import React from 'react';\nimport PopUp from '../../../common/popup/components/PopUpComponent';\nimport PopUpSomethingWentWrong from '../../../common/popup/components/PopUpSomethingWentWrongComponent';\nimport postProductsCategory from '../api/post/postProductsCategory';\nimport getCategories from '../../editCategory/api/get/getCategories';\n\nclass InputEditProductsCategory extends React.Component {\n  constructor(props) {\n    super(props);\n    const { category, id } = this.props;\n    this.state = {\n      id,\n      categoryName: category,\n      categoriesArray: [],\n      errorMessage: '',\n      isLoading: false,\n      popupSmthWentWrongActive: true,\n    };\n    this.setError = this.setError.bind(this);\n    this.updateDataCategories = this.updateDataCategories.bind(this);\n    this.setpopupSmthWentWrongActive = this.setpopupSmthWentWrongActive.bind(this);\n  }\n\n  componentDidMount() {\n    this.interval = setTimeout(async () => {\n      await getCategories(this.updateDataCategories, this.setError);\n    }, 10);\n  }\n\n  async handleCategoryProductsChange(e) {\n    const { id, categoriesArray } = this.state;\n    e.preventDefault();\n\n    this.setState({\n      categoryName: e.target.value,\n    });\n\n    postProductsCategory(id, e.target.value,\n      categoriesArray.categories);\n  }\n\n  setError(value) {\n    this.setState({\n      errorMessage: value,\n    });\n  }\n\n  setpopupSmthWentWrongActive(value) {\n    this.setState({\n      popupSmthWentWrongActive: value,\n    });\n  }\n\n  updateDataCategories(value, valueIsLoading) {\n    this.setState({\n      categoriesArray: value,\n      isLoading: valueIsLoading,\n    });\n  }\n\n  render() {\n    const {\n      categoriesArray, errorMessage,\n      isLoading, popupSmthWentWrongActive, categoryName,\n    } = this.state;\n    const { isProductsUpdated, setIsProductsUpdated } = this.props;\n\n    if (!isLoading) {\n      return <div className=\"-isLoading\"> </div>;\n    }\n    if (errorMessage) {\n      return (\n        <PopUp\n          active={popupSmthWentWrongActive}\n          setActive={this.setpopupSmthWentWrongActive}\n        >\n          <PopUpSomethingWentWrong\n            text=\"Попробуйте еще раз\"\n            setpopupSmthWentWrongActive={this.setpopupSmthWentWrongActive}\n          />\n        </PopUp>\n      );\n    }\n\n    return (\n      <>\n        <select\n          className=\"productsCategory\"\n          value={categoryName}\n          onChange={async (e) => {\n            this.handleCategoryProductsChange(e);\n            (isProductsUpdated\n              ? setIsProductsUpdated(false)\n              : setIsProductsUpdated(true));\n          }}\n          onBlur={() => (isProductsUpdated\n            ? setIsProductsUpdated(false)\n            : setIsProductsUpdated(true))}\n        >\n          {categoriesArray.categories.map((category) => (\n            <option\n              key={category.id}\n              value={category.category}\n            >\n              {category.category}\n            </option>\n          ))}\n        </select>\n\n      </>\n    );\n  }\n}\n\nexport default InputEditProductsCategory;\n"]},"metadata":{},"sourceType":"module"}